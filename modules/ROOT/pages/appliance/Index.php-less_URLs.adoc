Enable index.php-less URLs
==========================

If you want clear URLs without "index.php", for example instead of *https://example.com/index.php/apps/files/* you want to have *https://example.com/apps/files/*, you can enable it by following these steps:

Prerequisites:
--------------

You have to log in to the docker container running ownCloud. Execute the following command on the host system of the Appliance:

....
univention-app shell owncloud
....

Your web server needs to have the following modules enabled: *mod_rewrite* and *mod_env*. If you have not yet enabled these modules, or are not sure if you have, execute these commands:

....
a2enmod rewrite

a2enmod env
....

You need a *owncloud.conf* in your /etc/apache2/sites-available/ directory.

Open /etc/apache2/sites-available/owncloud.conf in nano or vim and paste the following:

....
Alias /owncloud "/var/www/owncloud/"

<Directory /var/www/owncloud/>
  Options +FollowSymlinks
  AllowOverride All

 <IfModule mod_dav.c>
  Dav off
 </IfModule>

 SetEnv HOME /var/www/owncloud
 SetEnv HTTP_HOME /var/www/owncloud

</Directory>
....

Then create a symlink to /etc/apache2/sites-enabled:

....
ln -s /etc/apache2/sites-available/owncloud.conf /etc/apache2/sites-enabled/owncloud.conf
....

Now you can enable the index.php-less URLs:
-------------------------------------------

1. Adjust your config.php to look like this:

....
'overwrite.cli.url' => 'https://example.com/owncloud',
'htaccess.RewriteBase' => '/owncloud',
....

2. Execute this command:

....
occ maintenance:update:htaccess
....

3. Restart or Reload your Apache server.

....
service apache2 reload
....

Now you should have index.php-less URLs.
