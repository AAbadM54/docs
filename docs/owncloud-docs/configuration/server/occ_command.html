<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Using the occ Command :: ownCloud Documentation</title>
    <link rel="stylesheet" href="../../../owncloud-docs/css/site.css">
  </head>
  <body class="article">
<header class="header" role="banner">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="../../..">ownCloud Documentation</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="#">Home</a>
        <a class="navbar-item" href="https://owncloud.org/news/">News</a>
        <a class="navbar-item" href="https://owncloud.org/features/">Features</a>
        <a class="navbar-item" href="https://demo.owncloud.org/">Demo</a>
        <a class="navbar-item" href="#">Documentation</a>
        <a class="navbar-item" href="https://owncloud.org/contribute/">Contribute</a>
        <a class="navbar-item" href="https://owncloud.org/support">Support</a>
        <a class="navbar-item" href="https://owncloud.com/">Enterprise Edition</a>
        <!--<div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Products</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Product A</a>
            <a class="navbar-item" href="#">Product B</a>
            <a class="navbar-item" href="#">Product C</a>
          </div>
        </div>-->
        <div class="navbar-item">
          <span class="control">
            <a class="button is-primary" href="https://owncloud.org/install/">Download</a>
          </span>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="main-wrapper">
<div class="navigation-container" data-component="owncloud-docs" data-version="master">
  <aside class="navigation" role="navigation">
    <div class="panels">
<div class="navigation-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../../index.html">ownCloud // Documentation</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-toggle"></button>
    <span class="nav-text">ROOT</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <span class="nav-text">Appliance</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <button class="nav-toggle"></button>
    <span class="nav-text">Ucs</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../appliance/ucs/add-groups-and-users.html">Add groups and users</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../appliance/Active_Directory.html">Active Directory</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../appliance/Backup.html">Backup</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../appliance/Clamav.html">ClamAV</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../appliance/Office.html">Office</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../appliance/certificates.html">Certificates</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../appliance/howto-update-owncloud.html">Howto update ownCloud</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../appliance/index.html">Index</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../appliance/installation.html">Installation</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../appliance/login_information.html">Login Information</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../appliance/managing-ucs.html">Managing UCS</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../appliance/what-is-it.html">What is it</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <span class="nav-text">Configuration</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <button class="nav-toggle"></button>
    <span class="nav-text">Database</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../database/db_conversion.html">DB Conversion</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../database/index.html">Index</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../database/linux_database_configuration.html">Linux Database Configuration</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-toggle"></button>
    <span class="nav-text">Files</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../files/external_storage/amazons3.html">AmazonS3</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../files/big_file_upload_configuration.html">Big File Upload Configuration</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../files/default_files_configuration.html">Default Files Configuration</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../files/encryption_configuration.html">Encryption Configuration</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../files/external_storage_configuration.html">External Storage Configuration</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../files/external_storage_configuration_gui.html">External Storage Configuration GUI</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../files/federated_cloud_sharing_configuration.html">Federated Cloud Sharing Configuration</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../files/file_sharing_configuration.html">File Sharing Configuration</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../files/file_versioning.html">File Versioning</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../files/files_locking_transactional.html">Files LOCking Transactional</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../files/index.html">Index</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../files/previews_configuration.html">Previews Configuration</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../files/trashbin_options.html">Trashbin Options</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-toggle"></button>
    <span class="nav-text">Ldap</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../ldap/ldap_proxy_cache_server_setup.html">LDAP Proxy Cache Server Setup</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-toggle"></button>
    <span class="nav-text">Mimetypes</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../mimetypes/index.html">Index</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-toggle"></button>
    <span class="nav-text">Server</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="security/password-policy.html">Password policy</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="activity_configuration.html">Activity Configuration</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="antivirus_configuration.html">AntiVirus Configuration</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="automatic_configuration.html">Automatic Configuration</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="background_jobs_configuration.html">Background Jobs Configuration</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="caching_configuration.html">Caching Configuration</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="config_sample_php_parameters.html">Config Sample PHP Parameters</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="custom_client_repos.html">Custom Client Repos</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="email_configuration.html">Email Configuration</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="excluded_blacklisted_files.html">Excluded Blacklisted Files</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="external_sites.html">External Sites</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="harden_server.html">Harden Server</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="import_ssl_cert.html">Import SSL Cert</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="index.html">Index</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="index_php_less_urls.html">Index PHP Less URLs</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="knowledgebase_configuration.html">Knowledgebase Configuration</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="language_configuration.html">Language Configuration</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="logging_configuration.html">Logging Configuration</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="oc_server_tuning.html">OC Server Tuning</a>
  </li>
  <li class="nav-item is-current-page" data-depth="4">
    <a class="nav-link" href="occ_command.html">OCC Command</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="reverse_proxy_configuration.html">Reverse Proxy Configuration</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="security_setup_warnings.html">Security Setup Warnings</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="thirdparty_php_configuration.html">Thirdparty PHP Configuration</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-toggle"></button>
    <span class="nav-text">User</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../user/index.html">Index</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../user/reset_admin_password.html">Reset Admin Password</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../user/reset_user_password.html">Reset User Password</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../user/user_auth_ftp_smb_imap.html">User Auth FTP SMB IMAP</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../user/user_auth_ldap.html">User Auth LDAP</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../user/user_configuration.html">User Configuration</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../user/user_provisioning_api.html">User Provisioning API</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../user/user_roles.html">User Roles</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../index.html">Index</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <span class="nav-text">Enterprise</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <button class="nav-toggle"></button>
    <span class="nav-text">Clients</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../enterprise/clients/creating_branded_apps.html">Creating Branded Apps</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../enterprise/clients/custom_client_repos.html">Custom Client Repos</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../enterprise/clients/index.html">Index</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-toggle"></button>
    <span class="nav-text">External_storage</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../enterprise/external_storage/enterprise_only_auth.html">Enterprise Only Auth</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../enterprise/external_storage/index.html">Index</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../enterprise/external_storage/ldap_home_connector_configuration.html">LDAP Home Connector Configuration</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../enterprise/external_storage/onedrive.html">OneDrive</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../enterprise/external_storage/s3_swift_as_primary_object_store_configuration.html">S3 Swift As Primary Object Store Configuration</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../enterprise/external_storage/sharepoint-integration_configuration.html">Sharepoint integration Configuration</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../enterprise/external_storage/windows-network-drive_configuration.html">Windows network drive Configuration</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-toggle"></button>
    <span class="nav-text">File_management</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../enterprise/file_management/files_tagging.html">Files Tagging</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../enterprise/file_management/index.html">Index</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-toggle"></button>
    <span class="nav-text">Firewall</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../enterprise/firewall/file_firewall.html">File Firewall</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../enterprise/firewall/index.html">Index</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-toggle"></button>
    <span class="nav-text">Installation</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../enterprise/installation/index.html">Index</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../enterprise/installation/install.html">Install</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../enterprise/installation/oracle_db_configuration.html">Oracle DB Configuration</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-toggle"></button>
    <span class="nav-text">Logging</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../enterprise/logging/enterprise_logging_apps.html">Enterprise Logging Apps</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../enterprise/logging/index.html">Index</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-toggle"></button>
    <span class="nav-text">Ransomware-protection</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../enterprise/ransomware-protection/index.html">Index</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-toggle"></button>
    <span class="nav-text">Server_branding</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../enterprise/server_branding/enterprise_server_branding.html">Enterprise Server Branding</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../enterprise/server_branding/index.html">Index</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-toggle"></button>
    <span class="nav-text">User_management</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../enterprise/user_management/index.html">Index</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../enterprise/user_management/user_auth_shibboleth.html">User Auth Shibboleth</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../enterprise/index.html">Index</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <span class="nav-text">Faq</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../faq/index.html">Index</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <span class="nav-text">Installation</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <button class="nav-toggle"></button>
    <span class="nav-text">Docker</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../installation/docker/index.html">Index</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-toggle"></button>
    <span class="nav-text">Letsencrypt</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../installation/letsencrypt/apache.html">Apache</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../installation/letsencrypt/index.html">Index</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../installation/letsencrypt/nginx.html">NGINX</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../installation/apps_management_installation.html">Apps Management Installation</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../installation/apps_supported.html">Apps Supported</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../installation/changing_the_web_route.html">Changing the Web Route</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../installation/command_line_installation.html">Command Line Installation</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../installation/configuration_notes_and_tips.html">Configuration Notes and Tips</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../installation/deployment_considerations.html">Deployment Considerations</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../installation/deployment_recommendations.html">Deployment Recommendations</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../installation/index.html">Index</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../installation/installation_wizard.html">Installation Wizard</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../installation/linux_installation.html">Linux Installation</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../installation/nginx_configuration.html">NGINX Configuration</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../installation/selinux_configuration.html">SELinux Configuration</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../installation/source_installation.html">Source Installation</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../installation/system_requirements.html">System ReqUIrements</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../installation/troubleshooting.html">Troubleshooting</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <span class="nav-text">Issues</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../issues/code_signing.html">Code Signing</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../issues/general_troubleshooting.html">General Troubleshooting</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../issues/impersonate_users.html">Impersonate Users</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../issues/index.html">Index</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <span class="nav-text">Maintenance</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../maintenance/backup.html">Backup</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../maintenance/enable_maintenance.html">Enable Maintenance</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../maintenance/index.html">Index</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../maintenance/manual_upgrade.html">Manual Upgrade</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../maintenance/manually-moving-data-folders.html">Manually moving data folders</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../maintenance/migrating.html">Migrating</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../maintenance/package_upgrade.html">Package Upgrade</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../maintenance/restore.html">Restore</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../maintenance/update.html">Update</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../maintenance/upgrade.html">Upgrade</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <span class="nav-text">Upgrading</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../upgrading/index.html">Index</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../upgrading/marketplace_apps.html">Marketplace Apps</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../upgrading/upgrade_php.html">Upgrade PHP</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../contents.html">Contents</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../index.html">Index</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../release_notes.html">Release Notes</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../whats_new_admin.html">Whats New Admin</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-toggle"></button>
    <span class="nav-text">user manual</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <span class="nav-text">External_storage</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../user_manual/external_storage/external_storage.html">External Storage</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../user_manual/external_storage/index.html">Index</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../user_manual/external_storage/sharepoint_connecting.html">Sharepoint Connecting</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <span class="nav-text">Files</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <button class="nav-toggle"></button>
    <span class="nav-text">Webgui</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../user_manual/files/webgui/comments.html">Comments</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../user_manual/files/webgui/custom_groups.html">Custom Groups</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../user_manual/files/webgui/index.html">Index</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../user_manual/files/webgui/navigating.html">Navigating</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../user_manual/files/webgui/overview.html">Overview</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../user_manual/files/webgui/quota.html">Quota</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../user_manual/files/webgui/sharing.html">Sharing</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../user_manual/files/webgui/tagging.html">Tagging</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../user_manual/files/access_webdav.html">Access Webdav</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../user_manual/files/deleted_file_management.html">Deleted File Management</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../user_manual/files/desktop_mobile_sync.html">Desktop Mobile Sync</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../user_manual/files/encrypting_files.html">Encrypting Files</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../user_manual/files/federated_cloud_sharing.html">Federated Cloud Sharing</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../user_manual/files/gallery_app.html">Gallery App</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../user_manual/files/index.html">Index</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../user_manual/files/large_file_upload.html">Large File Upload</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../user_manual/files/public_link_shares.html">Public Link Shares</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../user_manual/files/troubleshooting.html">Troubleshooting</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../user_manual/files/version_control.html">Version Control</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <span class="nav-text">Pim</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../user_manual/pim/calendar.html">Calendar</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../user_manual/pim/contacts.html">Contacts</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../user_manual/pim/index.html">Index</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../user_manual/pim/sync_ios.html">Sync Ios</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../user_manual/pim/sync_kde.html">Sync Kde</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../user_manual/pim/sync_osx.html">Sync Osx</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../user_manual/pim/sync_thunderbird.html">Sync Thunderbird</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../user_manual/pim/troubleshooting.html">Troubleshooting</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../user_manual/contents.html">Contents</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../user_manual/index.html">Index</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../user_manual/session_management.html">Session Management</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../user_manual/troubleshooting.html">Troubleshooting</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../user_manual/userpreferences.html">Userpreferences</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../user_manual/webinterface.html">Webinterface</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../user_manual/whats_new.html">Whats New</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-toggle"></button>
    <span class="nav-text">developer manual</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <span class="nav-text">App</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <button class="nav-toggle"></button>
    <span class="nav-text">Advanced</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../developer_manual/app/advanced/code_signing.html">Code Signing</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../developer_manual/app/advanced/custom-cache-backend.html">Custom cache backend</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../developer_manual/app/advanced/custom-storage-backend.html">Custom storage backend</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../developer_manual/app/advanced/extstorage.html">Extstorage</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../developer_manual/app/advanced/index.html">Index</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../developer_manual/app/advanced/l10n.html">L10N</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../developer_manual/app/advanced/storage-backend.html">Storage backend</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../developer_manual/app/advanced/two-factor-provider.html">Two factor provider</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../developer_manual/app/advanced/users.html">Users</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-toggle"></button>
    <span class="nav-text">Fundamentals</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../developer_manual/app/fundamentals/api.html">API</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../developer_manual/app/fundamentals/backgroundjobs.html">Backgroundjobs</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../developer_manual/app/fundamentals/changelog.html">Changelog</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../developer_manual/app/fundamentals/classloader.html">ClaSSLoader</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../developer_manual/app/fundamentals/configuration.html">Configuration</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../developer_manual/app/fundamentals/container.html">Container</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../developer_manual/app/fundamentals/controllers.html">Controllers</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../developer_manual/app/fundamentals/css.html">CSS</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../developer_manual/app/fundamentals/database.html">Database</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../developer_manual/app/fundamentals/filesystem.html">Filesystem</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../developer_manual/app/fundamentals/hooks.html">Hooks</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../developer_manual/app/fundamentals/index.html">Index</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../developer_manual/app/fundamentals/info.html">Info</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../developer_manual/app/fundamentals/js.html">JS</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../developer_manual/app/fundamentals/logging.html">Logging</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../developer_manual/app/fundamentals/market_app.html">Market App</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../developer_manual/app/fundamentals/middleware.html">Middleware</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../developer_manual/app/fundamentals/publishing.html">Publishing</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../developer_manual/app/fundamentals/routes.html">Routes</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../developer_manual/app/fundamentals/templates.html">Templates</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../developer_manual/app/fundamentals/testing.html">Testing</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-toggle"></button>
    <span class="nav-text">Tutorial</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../developer_manual/app/tutorial/database_connectivity.html">Database Connectivity</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../developer_manual/app/tutorial/development_environment.html">Development Environment</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../developer_manual/app/tutorial/finishing_touches.html">Finishing Touches</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../developer_manual/app/tutorial/index.html">Index</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../developer_manual/app/tutorial/javascript_and_css.html">JavaScript and CSS</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../developer_manual/app/tutorial/navigation.html">Navigation</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../developer_manual/app/tutorial/request.html">Request</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../developer_manual/app/tutorial/requirements.html">ReqUIrements</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../developer_manual/app/tutorial/restful_api.html">Restful API</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../developer_manual/app/tutorial/routes_and_controllers.html">Routes and Controllers</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../developer_manual/app/tutorial/template_content.html">Template Content</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../developer_manual/app/tutorial/testing.html">Testing</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../developer_manual/app/tutorial/wiring_it_up.html">Wiring it Up</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../developer_manual/app/index.html">Index</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../developer_manual/app/introduction.html">Introduction</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <span class="nav-text">Bugtracker</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../developer_manual/bugtracker/codereviews.html">Codereviews</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../developer_manual/bugtracker/index.html">Index</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../developer_manual/bugtracker/triaging.html">Triaging</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <span class="nav-text">Commun</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../developer_manual/commun/help_and_communication.html">Help and Communication</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../developer_manual/commun/index.html">Index</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <span class="nav-text">Core</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../developer_manual/core/acceptance-tests.html">Acceptance tests</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../developer_manual/core/configfile.html">Configfile</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../developer_manual/core/externalapi.html">ExternalAPI</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../developer_manual/core/index.html">Index</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../developer_manual/core/introduction.html">Introduction</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../developer_manual/core/ocs-capabilities.html">OCS capabilities</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../developer_manual/core/ocs-recipient-api.html">OCS recipient API</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../developer_manual/core/ocs-share-api.html">OCS share API</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../developer_manual/core/theming.html">Theming</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../developer_manual/core/translation.html">Translation</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../developer_manual/core/ui-testing.html">UI testing</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../developer_manual/core/unit-testing.html">Unit testing</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <span class="nav-text">General</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../developer_manual/general/backporting.html">Backporting</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../developer_manual/general/code-of-conduct.html">Code of conduct</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../developer_manual/general/codingguidelines.html">CodingGUIdelines</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../developer_manual/general/debugging.html">Debugging</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../developer_manual/general/devenv.html">Devenv</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../developer_manual/general/index.html">Index</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../developer_manual/general/performance.html">Performance</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../developer_manual/general/security.html">Security</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <span class="nav-text">Mobile_development</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <button class="nav-toggle"></button>
    <span class="nav-text">Android_library</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../developer_manual/mobile_development/android_library/examples.html">Examples</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../developer_manual/mobile_development/android_library/index.html">Index</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../developer_manual/mobile_development/android_library/library_installation.html">Library Installation</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-toggle"></button>
    <span class="nav-text">Ios_library</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../developer_manual/mobile_development/ios_library/examples.html">Examples</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../developer_manual/mobile_development/ios_library/index.html">Index</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../developer_manual/mobile_development/ios_library/library_installation.html">Library Installation</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../developer_manual/mobile_development/index.html">Index</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <span class="nav-text">Testing</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../developer_manual/testing/index.html">Index</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <span class="nav-text">Webdav_api</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../developer_manual/webdav_api/comments.html">Comments</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../developer_manual/webdav_api/files_versions.html">Files Versions</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../developer_manual/webdav_api/index.html">Index</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../developer_manual/webdav_api/tags.html">Tags</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../developer_manual/index.html">Index</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="navigation-explore" data-panel="explore">
  <div class="context">
    <span class="title">ownCloud // Documentation</span>
    <span class="version">master</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <span class="title">ownCloud // Documentation</span>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../../index.html">master</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
  <main class="main" role="main">
<div class="toolbar" role="navigation">
  <button class="navigation-toggle"></button>
<nav class="crumbs" role="navigation" aria-label="breadcrumbs">
  <ul>
    <li class="crumb"><a href="../../index.html">ownCloud // Documentation</a></li>
    <li class="crumb">ROOT</li>
    <li class="crumb">Configuration</li>
    <li class="crumb">Server</li>
    <li class="crumb"><a href="occ_command.html">OCC Command</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="file:///Users/settermjd/Workspace/clients/ownCloud/antora-build/admin_manual/modules/ROOT/pages/configuration/server/occ_command.adoc">Edit this Page</a></div>
</div>
<article class="doc">
<h1>Using the occ Command</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>ownCloud’s <code>occ</code> command (ownCloud console) is ownCloud’s command-line
interface. You can perform many common server operations with <code>occ</code>,
such as installing and upgrading ownCloud, managing users and groups,
encryption, passwords, LDAP setting, and more.</p>
</div>
<div class="paragraph">
<p><code>occ</code> is in the owncloud/ directory; for example /var/www/owncloud on
Ubuntu Linux. <code>occ</code> is a PHP script. <strong>You must run it as your HTTP user</strong>
to ensure that the correct permissions are maintained on your ownCloud
files and directories.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="occ-command-directory"><a class="anchor" href="#occ-command-directory"></a>occ Command Directory</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>http_user_label</p>
</li>
<li>
<p>apps_commands_label</p>
</li>
<li>
<p>background_jobs_selector_label</p>
</li>
<li>
<p>config_commands_label</p>
</li>
<li>
<p>dav_label</p>
</li>
<li>
<p>database_conversion_label</p>
</li>
<li>
<p>encryption_label</p>
</li>
<li>
<p>federation_sync_label</p>
</li>
<li>
<p>file_operations_label</p>
</li>
<li>
<p>files_external_label</p>
</li>
<li>
<p>group_commands_label</p>
</li>
<li>
<p>integrity_check_label</p>
</li>
<li>
<p>create_javascript_translation_files_label</p>
</li>
<li>
<p>ldap_commands_label</p>
</li>
<li>
<p>logging_commands_label</p>
</li>
<li>
<p>maintenance_commands_label</p>
</li>
<li>
<p>market_commands_label</p>
</li>
<li>
<p>reports_commands_label</p>
</li>
<li>
<p>security_commands_label</p>
</li>
<li>
<p>ransomware_commands_label</p>
</li>
<li>
<p>shibboleth_label</p>
</li>
<li>
<p>trashbin_label</p>
</li>
<li>
<p>user_commands_label</p>
</li>
<li>
<p>versions_label</p>
</li>
<li>
<p>command_line_installation_label</p>
</li>
<li>
<p>command_line_upgrade_label</p>
</li>
<li>
<p>two_factor_auth_label</p>
</li>
<li>
<p>disable_user_label</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="run-occ-as-your-http-user"><a class="anchor" href="#run-occ-as-your-http-user"></a>Run occ As Your HTTP User</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The HTTP user is different on the various Linux distributions. See
strong_perms_label to learn how to find your HTTP user.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The HTTP user and group in Debian/Ubuntu is www-data.</p>
</li>
<li>
<p>The HTTP user and group in Fedora/CentOS is apache.</p>
</li>
<li>
<p>The HTTP user and group in Arch Linux is http.</p>
</li>
<li>
<p>The HTTP user in openSUSE is wwwrun, and the HTTP group is www.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If your HTTP server is configured to use a different PHP version than
the default (/usr/bin/php), <code>occ</code> should be run with the same version.
For example, in CentOS 6.5 with SCL-PHP54 installed, the command looks
like this:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>sudo -u apache /opt/rh/php54/root/usr/bin/php /var/www/html/owncloud/occ</pre>
</div>
</div>
<div class="paragraph">
<p>Running <code>occ</code> with no options lists all commands and options, like this
example on Ubuntu:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>sudo -u www-data php occ
ownCloud version 10.0.8

Usage:
 command [options] [arguments]

Options:
 -h, --help            Display this help message
 -q, --quiet           Do not output any message
 -V, --version         Display this application version
     --ansi            Force ANSI output
     --no-ansi         Disable ANSI output
 -n, --no-interaction  Do not ask any interactive question
     --no-warnings     Skip global warnings, show command output only
 -v|vv|vvv, --verbose  Increase the verbosity of messages: 1 for normal output,
                       2 for more verbose output and 3 for debug

Available commands:
 check                 Check dependencies of the server environment
 help                  Displays help for a command
 list                  Lists commands
 status                Show some status information
 upgrade               Run upgrade routines after installation of
                       a new release. The release has to be installed before</pre>
</div>
</div>
<div class="paragraph">
<p>This is the same as <code>sudo -u www-data php occ list</code>. Run it with the
<code>-h</code> option for syntax help:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>sudo -u www-data php occ -h</pre>
</div>
</div>
<div class="paragraph">
<p>Display your ownCloud version:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>sudo -u www-data php occ -V
  ownCloud version 10.0.8</pre>
</div>
</div>
<div class="paragraph">
<p>Query your ownCloud server status:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>sudo -u www-data php occ status
  - installed: true
  - version: 10.0.8.5
  - versionstring: 10.0.8
  - edition: Community</pre>
</div>
</div>
<div class="paragraph">
<p><code>occ</code> has <em>options</em>, <em>commands</em>, and <em>arguments</em>. Commands are required.
Options are optional. Arguments can be required <em>or</em> optional. The,
generic, syntax is</p>
</div>
<div class="literalblock">
<div class="content">
<pre>occ [options] command [arguments]</pre>
</div>
</div>
<div class="paragraph">
<p>Get detailed information on individual commands with the <code>help</code> command,
like this example for the <code>maintenance:mode</code> command</p>
</div>
<div class="literalblock">
<div class="content">
<pre>sudo -u www-data php occ help maintenance:mode
Usage:
 maintenance:mode [options]

Options:
     --on              Enable maintenance mode
     --off             Disable maintenance mode
     --output[=OUTPUT] Output format (plain, json or json_pretty, default is plain) [default: "plain"]
 -h, --help            Display this help message
 -q, --quiet           Do not output any message
 -V, --version         Display this application version
     --ansi            Force ANSI output
     --no-ansi         Disable ANSI output
 -n, --no-interaction  Do not ask any interactive question
     --no-warnings     Skip global warnings, show command output only
 -v|vv|vvv, --verbose  Increase the verbosity of messages: 1 for normal output,
                       2 for more verbose output and 3 for debug</pre>
</div>
</div>
<div class="paragraph">
<p>The <code>status</code> command from above has an option to define the output
format. The default is plain text, but it can also be <code>json</code></p>
</div>
<div class="literalblock">
<div class="content">
<pre>sudo -u www-data php occ status --output=json
{"installed":true,"version":"9.0.0.19","versionstring":"9.0.0","edition":""}</pre>
</div>
</div>
<div class="paragraph">
<p>or <code>json_pretty</code></p>
</div>
<div class="literalblock">
<div class="content">
<pre>sudo -u www-data php occ status --output=json_pretty
{
   "installed": true,
   "version": "10.0.8.5",
   "versionstring": "10.0.8",
   "edition": "Community"
}</pre>
</div>
</div>
<div class="paragraph">
<p>This output option is available on all list and list-like commands,
which include <code>status</code>, <code>check</code>, <code>app:list</code>, <code>config:list</code>,
<code>encryption:status</code> and <code>encryption:list-modules</code>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="apps-commands"><a class="anchor" href="#apps-commands"></a>Apps Commands</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <code>app</code> commands list, enable, and disable apps</p>
</div>
<div class="literalblock">
<div class="content">
<pre>app
 app:check-code   check code to be compliant
 app:disable      disable an app
 app:enable       enable an app
 app:getpath      Get an absolute path to the app directory
 app:list         List all available apps</pre>
</div>
</div>
<div class="paragraph">
<p>List all of your installed apps or optionally provide a search pattern
to restrict the list of apps to those whose name matches the given
regular expression. The output shows whether they are enabled or
disabled</p>
</div>
<div class="literalblock">
<div class="content">
<pre>sudo -u www-data php occ app:list [&lt;search-pattern&gt;]</pre>
</div>
</div>
<div class="paragraph">
<p>Enable an app, for example the Market app</p>
</div>
<div class="literalblock">
<div class="content">
<pre>sudo -u www-data php occ app:enable market
market enabled</pre>
</div>
</div>
<div class="paragraph">
<p>Disable an app</p>
</div>
<div class="literalblock">
<div class="content">
<pre>sudo -u www-data php occ app:disable market
market disabled</pre>
</div>
</div>
<div class="paragraph">
<p>Be aware that the following apps cannot be disabled: <em>DAV</em>,
<em>FederatedFileSharing</em>, <em>Files</em> and <em>Files_External</em>.</p>
</div>
<div class="paragraph">
<p><code>app:check-code</code> has multiple checks: it checks if an app uses
ownCloud’s public API (<code>OCP</code>) or private API (<code>OC_</code>), and it also checks
for deprecated methods and the validity of the <code>info.xml</code> file. By
default all checks are enabled. The Activity app is an example of a
correctly-formatted app</p>
</div>
<div class="literalblock">
<div class="content">
<pre>sudo -u www-data php occ app:check-code notifications
App is compliant - awesome job!</pre>
</div>
</div>
<div class="paragraph">
<p>If your app has issues, you’ll see output like this</p>
</div>
<div class="literalblock">
<div class="content">
<pre>sudo -u www-data php occ app:check-code foo_app
Analysing /var/www/owncloud/apps/files/foo_app.php
4 errors
   line   45: OCP\Response - Static method of deprecated class must not be
   called
   line   46: OCP\Response - Static method of deprecated class must not be
   called
   line   47: OCP\Response - Static method of deprecated class must not be
   called
   line   49: OC_Util - Static method of private class must not be called</pre>
</div>
</div>
<div class="paragraph">
<p>You can get the full file path to an app</p>
</div>
<div class="literalblock">
<div class="content">
<pre>sudo -u www-data php occ app:getpath notifications
/var/www/owncloud/apps/notifications</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="background-jobs-selector"><a class="anchor" href="#background-jobs-selector"></a>Background Jobs Selector</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Use the <code>background</code> command to select which scheduler you want to use
for controlling <em>background jobs</em>, <em>Ajax</em>, <em>Webcron</em>, or <em>Cron</em>. This is
the same as using the <strong>Cron</strong> section on your ownCloud Admin page.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sourceCode hljs" data-lang="sourceCode">background
 background:ajax       Use ajax to run background jobs
 background:cron       Use cron to run background jobs
 background:webcron    Use webcron to run background jobs</code></pre>
</div>
</div>
<div class="paragraph">
<p>This example selects Ajax:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>sudo -u www-data php occ background:ajax
  Set mode for background jobs to 'ajax'</pre>
</div>
</div>
<div class="paragraph">
<p>The other two commands are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>background:cron</code></p>
</li>
<li>
<p><code>background:webcron</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>See ../../configuration/server/background_jobs_configuration to learn
more.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="config-commands"><a class="anchor" href="#config-commands"></a>Config Commands</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <code>config</code> commands are used to configure the ownCloud server.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>config
 config:app:delete      Delete an app config value
 config:app:get         Get an app config value
 config:app:set         Set an app config value
 config:import          Import a list of configuration settings
 config:list            List all configuration settings
 config:system:delete   Delete a system config value
 config:system:get      Get a system config value
 config:system:set      Set a system config value</pre>
</div>
</div>
<div class="paragraph">
<p>You can list all configuration values with one command:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>sudo -u www-data php occ config:list</pre>
</div>
</div>
<div class="paragraph">
<p>By default, passwords and other sensitive data are omitted from the
report, so the output can be posted publicly (e.g., as part of a bug
report). In order to generate a full backport of all configuration
values the <code>--private</code> flag needs to be set:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>sudo -u www-data php occ config:list --private</pre>
</div>
</div>
<div class="paragraph">
<p>The exported content can also be imported again to allow the fast setup
of similar instances. The import command will only add or update values.
Values that exist in the current configuration, but not in the one that
is being imported are left untouched.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>sudo -u www-data php occ config:import filename.json</pre>
</div>
</div>
<div class="paragraph">
<p>It is also possible to import remote files, by piping the input:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>sudo -u www-data php occ config:import &lt; local-backup.json</pre>
</div>
</div>
<div class="paragraph">
<p>While it is possible to update/set/delete the versions and installation
statuses of apps and ownCloud itself, it is <strong>not</strong> recommended to do this
directly. Use the <code>occ app:enable</code>, <code>occ app:disable</code> and <code>occ update</code>
commands instead.</p>
</div>
<div class="sect2">
<h3 id="getting-a-single-configuration-value"><a class="anchor" href="#getting-a-single-configuration-value"></a>Getting a Single Configuration Value</h3>
<div class="paragraph">
<p>These commands get the value of a single app or system configuration:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>sudo -u www-data php occ config:system:get version
10.0.8.5

sudo -u www-data php occ config:app:get activity installed_version
2.2.1</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="setting-a-single-configuration-value"><a class="anchor" href="#setting-a-single-configuration-value"></a>Setting a Single Configuration Value</h3>
<div class="paragraph">
<p>These commands set the value of a single app or system configuration:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>sudo -u www-data php occ config:system:set logtimezone
   --value="Europe/Berlin"
System config value logtimezone set to Europe/Berlin

sudo -u www-data php occ config:app:set files_sharing
incoming_server2server_share_enabled --value="yes" --type=boolean
Config value incoming_server2server_share_enabled for app files_sharing set to yes</pre>
</div>
</div>
<div class="paragraph">
<p>The <code>config:system:set</code> command creates the value, if it does not
already exist. To update an existing value, set <code>--update-only</code>:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>sudo -u www-data php occ config:system:set doesnotexist --value="true"
   --type=boolean --update-only
Value not updated, as it has not been set before.</pre>
</div>
</div>
<div class="paragraph">
<p>Note that in order to write a Boolean, float, or integer value to the
configuration file, you need to specify the type on your command. This
applies only to the <code>config:system:set</code> command. The following values
are known:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>boolean</code></p>
</li>
<li>
<p><code>integer</code></p>
</li>
<li>
<p><code>float</code></p>
</li>
<li>
<p><code>string</code> (default)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>When you want to e.g., disable the maintenance mode run the following
command:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>sudo -u www-data php occ config:system:set maintenance --value=false
   --type=boolean
ownCloud is in maintenance mode - no app have been loaded
System config value maintenance set to boolean false</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="setting-an-array-of-configuration-values"><a class="anchor" href="#setting-an-array-of-configuration-values"></a>Setting an Array of Configuration Values</h3>
<div class="paragraph">
<p>Some configurations (e.g., the trusted domain setting) are an array of
data. In order to set (and also get) the value of one key, you can
specify multiple <code>config</code> names separated by spaces:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>sudo -u www-data php occ config:system:get trusted_domains localhost owncloud.local sample.tld</pre>
</div>
</div>
<div class="paragraph">
<p>To replace <code>sample.tld</code> with <code>example.com</code> trusted_domains &#8658; 2 needs to
be set:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>sudo -u www-data php occ config:system:set trusted_domains 2
   --value=example.com
System config value trusted_domains =&gt; 2 set to string example.com

sudo -u www-data php occ config:system:get trusted_domains localhost owncloud.local example.com</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="deleting-a-single-configuration-value"><a class="anchor" href="#deleting-a-single-configuration-value"></a>Deleting a Single Configuration Value</h3>
<div class="paragraph">
<p>These commands delete the configuration of an app or system
configuration:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>sudo -u www-data php occ config:system:delete maintenance:mode
System config value maintenance:mode deleted

sudo -u www-data php occ config:app:delete appname provisioning_api
Config value provisioning_api of app appname deleted</pre>
</div>
</div>
<div class="paragraph">
<p>The delete command will by default not complain if the configuration was
not set before. If you want to be notified in that case, set the
<code>--error-if-not-exists</code> flag.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>sudo -u www-data php occ config:system:delete doesnotexist --error-if-not-exists
Config provisioning_api of app appname could not be deleted because it did not exist</pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="dav-commands"><a class="anchor" href="#dav-commands"></a>Dav Commands</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A set of commands to create address books, calendars, and to migrate
address books:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sourceCode hljs" data-lang="sourceCode">dav
 dav:cleanup-chunks            Cleanup outdated chunks
 dav:create-addressbook        Create a dav address book
 dav:create-calendar           Create a dav calendar
 dav:sync-birthday-calendar    Synchronizes the birthday calendar
 dav:sync-system-addressbook   Synchronizes users to the system address book</code></pre>
</div>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>These commands are not available in
single-user (maintenance) mode &lt;maintenance_commands_label&gt;.</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p><code>dav:cleanup-chunks</code> cleans up outdated chunks (uploaded files) more
than a certain number of days old. By default, the command cleans up
chunks more than 2 days old. However, by supplying the number of days to
the command, the range can be increased. For example, in the example
below, chunks older than 10 days will be removed.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>sudo -u www-data php occ dav:cleanup-chunks 10

# example output
Cleaning chunks older than 10 days(2017-11-08T13:13:45+00:00)
Cleaning chunks for admin
   0 [&gt;---------------------------]</pre>
</div>
</div>
<div class="paragraph">
<p>The syntax for <code>dav:create-addressbook</code> and <code>dav:create-calendar</code> is
<code>dav:create-addressbook [user] [name]</code>. This example creates the
addressbook <code>mollybook</code> for the user molly:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>sudo -u www-data php occ dav:create-addressbook molly mollybook</pre>
</div>
</div>
<div class="paragraph">
<p>This example creates a new calendar for molly:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>sudo -u www-data php occ dav:create-calendar molly mollycal</pre>
</div>
</div>
<div class="paragraph">
<p>Molly will immediately see these on her Calendar and Contacts pages.
Your existing calendars and contacts should migrate automatically when
you upgrade. If something goes wrong you can try a manual migration.
First delete any partially-migrated calendars or address books. Then run
this command to migrate user’s contacts:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>sudo -u www-data php occ dav:migrate-addressbooks [user]</pre>
</div>
</div>
<div class="paragraph">
<p>Run this command to migrate calendars:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>sudo -u www-data php occ dav:migrate-calendars [user]</pre>
</div>
</div>
<div class="paragraph">
<p><code>dav:sync-birthday-calendar</code> adds all birthdays to your calendar from
address books shared with you. This example syncs to your calendar from
user <code>bernie</code>:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>sudo -u www-data php occ dav:sync-birthday-calendar bernie</pre>
</div>
</div>
<div class="paragraph">
<p><code>dav:sync-system-addressbook</code> synchronizes all users to the system
addressbook.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>sudo -u www-data php occ dav:sync-system-addressbook</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="database-conversion"><a class="anchor" href="#database-conversion"></a>Database Conversion</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The SQLite database is good for testing, and for ownCloud servers with
small single-user workloads that do not use sync clients, but production
servers with multiple users should use MariaDB, MySQL, or PostgreSQL.
You can use <code>occ</code> to convert from SQLite to one of these other
databases.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sourceCode hljs" data-lang="sourceCode">db
 db:convert-type           Convert the ownCloud database to the newly configured one
 db:generate-change-script Generates the change script from the current
                           connected db to db_structure.xml</code></pre>
</div>
</div>
<div class="paragraph">
<p>You need:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Your desired database and its PHP connector installed.</p>
</li>
<li>
<p>The login and password of a database admin user.</p>
</li>
<li>
<p>The database port number, if it is a non-standard port.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This is example converts SQLite to MySQL/MariaDB:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>sudo -u www-data php occ db:convert-type mysql oc_dbuser 127.0.0.1 oc_database</pre>
</div>
</div>
<div class="paragraph">
<p>For a more detailed explanation see
../../configuration/database/db_conversion.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="encryption"><a class="anchor" href="#encryption"></a>Encryption</h2>
<div class="sectionbody">
<div class="paragraph">
<p><code>occ</code> includes a complete set of commands for managing encryption.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sourceCode hljs" data-lang="sourceCode">encryption
 encryption:change-key-storage-root  Change key storage root
 encryption:decrypt-all              Disable server-side encryption and decrypt all files
 encryption:disable                  Disable encryption
 encryption:enable                   Enable encryption
 encryption:encrypt-all              Encrypt all files for all users
 encryption:list-modules             List all available encryption modules
 encryption:migrate                  initial migration to encryption 2.0
 encryption:recreate-master-key      Replace existing master key with new one. Encrypt the file system with
                                     newly created master key
 encryption:select-encryption-type   Select the encryption type. The encryption types available are: masterkey and
                                     user-keys. There is also no way to disable it again.
 encryption:set-default-module       Set the encryption default module
 encryption:show-key-storage-root    Show current key storage root
 encryption:status                   Lists the current status of encryption</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>encryption:status</code> shows whether you have active encryption, and your
default encryption module. To enable encryption you must first enable
the Encryption app, and then run <code>encryption:enable</code>:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>sudo -u www-data php occ app:enable encryption
sudo -u www-data php occ encryption:enable
sudo -u www-data php occ encryption:status
 - enabled: true
 - defaultModule: OC_DEFAULT_MODULE</pre>
</div>
</div>
<div class="paragraph">
<p><code>encryption:change-key-storage-root</code> is for moving your encryption keys
to a different folder. It takes one argument, <code>newRoot</code>, which defines
your new root folder. The folder must exist, and the path is relative to
your root ownCloud directory.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>sudo -u www-data php occ encryption:change-key-storage-root ../../etc/oc-keys</pre>
</div>
</div>
<div class="paragraph">
<p>You can see the current location of your keys folder:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>sudo -u www-data php occ encryption:show-key-storage-root
Current key storage root:  default storage location (data/)</pre>
</div>
</div>
<div class="paragraph">
<p><code>encryption:list-modules</code> displays your available encryption modules.
You will see a list of modules only if you have enabled the Encryption
app. Use <code>encryption:set-default-module [module name]</code> to set your
desired module.</p>
</div>
<div class="paragraph">
<p><code>encryption:encrypt-all</code> encrypts all data files for all users. You must
first put your ownCloud server into
single-user mode&lt;maintenance_commands_label&gt; to prevent any user
activity until encryption is completed.</p>
</div>
<div class="paragraph">
<p><code>encryption:decrypt-all</code> decrypts all user data files, or optionally a
single user:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>sudo -u www-data php occ encryption:decrypt freda</pre>
</div>
</div>
<div class="paragraph">
<p>Users must have enabled recovery keys on their Personal pages. You must
first put your ownCloud server into
single-user mode &lt;maintenance_commands_label&gt; to prevent any user
activity until decryption is completed.</p>
</div>
<div class="paragraph">
<p>Use <code>encryption:disable</code> to disable your encryption module. You must
first put your ownCloud server into
single-user mode &lt;maintenance_commands_label&gt; to prevent any user
activity.</p>
</div>
<div class="paragraph">
<p><code>encryption:migrate</code> migrates encryption keys after a major ownCloud
version upgrade. You may optionally specify individual users in a
space-delimited list. See
../../configuration/files/encryption_configuration to learn more.</p>
</div>
<div class="paragraph">
<p><code>encryption:recreate-master-key</code> decrypts the ownCloud file system,
replaces the existing master key with a new one, and encrypts the entire
ownCloud file system with the new master key. Given the size of your
ownCloud filesystem, this may take some time to complete. However, if
your filesystem is quite small, then it will complete quite quickly. The
<code>-y</code> switch can be supplied to automate acceptance of user input.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="federation-sync"><a class="anchor" href="#federation-sync"></a>Federation Sync</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Synchronize the address books of all federated ownCloud servers.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sourceCode hljs" data-lang="sourceCode">federation:sync-addressbooks  Synchronizes address books of all federated clouds</code></pre>
</div>
</div>
<div class="paragraph">
<p>Servers connected with federation shares can share user address books,
and auto-complete usernames in share dialogs. Use this command to
synchronize federated servers:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>sudo -u www-data php occ federation:sync-addressbooks</pre>
</div>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>This command is only available when the &#8220;Federation&#8221; app
(<code>federation</code>) is enabled.</p>
</div>
</blockquote>
</div>
</div>
</div>
<div class="sect1">
<h2 id="file-operations"><a class="anchor" href="#file-operations"></a>File Operations</h2>
<div class="sectionbody">
<div class="paragraph">
<p><code>occ</code> has three commands for managing files in ownCloud.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sourceCode hljs" data-lang="sourceCode">files
 files:checksums:verify     Get all checksums in filecache and compares them by
                            recalculating the checksum of the file.
 files:cleanup              Deletes orphaned file cache entries.
 files:scan                 Rescans the filesystem.
 files:transfer-ownership   All files and folders are moved to another user
                            - outgoing shares are moved as well (incoming shares are
                            not moved as the sharing user holds the ownership of the respective files).</code></pre>
</div>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>These commands are not available in
single-user (maintenance) mode &lt;maintenance_commands_label&gt;.</p>
</div>
</blockquote>
</div>
<div class="sect2">
<h3 id="the-fileschecksumsverify-command"><a class="anchor" href="#the-fileschecksumsverify-command"></a>The files:checksums:verify command</h3>
<div class="paragraph">
<p>ownCloud supports file integrity checking, by computing and matching
checksums. Doing so ensures that transferred files arrive at their
target in the exact state as they left their origin.</p>
</div>
<div class="paragraph">
<p>In some rare cases, wrong checksums are written to the database which
leads to synchronization issues, such as with the Desktop Client. To
mitigate such problems a new command is available:
<code>occ files:checksums:verify</code>.</p>
</div>
<div class="paragraph">
<p>Executing the command recalculates checksums, either for all files of a
user or within a specified filesystem path on the designated storage. It
then compares them with the values in the database. The command also
offers an option to repair incorrect checksum values (<code>-r, --repair</code>).</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Executing this command might take some time depending on the file count.</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>Below is sample output that you can expect to see when using the
command.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>./occ files:checksums:verify
This operation might take very long.
Mismatch for files/welcome.txt:
 Filecache:   SHA1:eeb2c08011374d8ad4e483a4938e1aa1007c089d MD5:368e3a6cb99f88c3543123931d786e21 ADLER32:c5ad3a63
 Actual:  SHA1:da39a3ee5e6b4b0d3255bfef95601890afd80709 MD5:d41d8cd98f00b204e9800998ecf8427e ADLER32:00000001
Mismatch for thumbnails/9/2048-2048-max.png:
 Filecache:   SHA1:2634fed078d1978f24f71892bf4ee0e4bd0c3c99 MD5:dd249372f7a68c551f7e6b2615d49463 ADLER32:821230d4
 Actual:  SHA1:da39a3ee5e6b4b0d3255bfef95601890afd80709 MD5:d41d8cd98f00b204e9800998ecf8427e ADLER32:00000001</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="the-filescleanup-command"><a class="anchor" href="#the-filescleanup-command"></a>The files:cleanup command</h3>
<div class="paragraph">
<p><code>files:cleanup</code> tidies up the server’s file cache by deleting all file
entries that have no matching entries in the storage table.</p>
</div>
</div>
<div class="sect2">
<h3 id="the-filesscan-command"><a class="anchor" href="#the-filesscan-command"></a>The files:scan command</h3>
<div class="paragraph">
<p>The <code>files:scan</code> command</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Scans for new files.</p>
</li>
<li>
<p>Scans not fully scanned files.</p>
</li>
<li>
<p>Repairs file cache holes.</p>
</li>
<li>
<p>Updates the file cache.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>File scans can be performed per-user, for a space-delimited list of
users, and for all users.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>sudo -u www-data php occ files:scan --help
 Usage:
   files:scan [options] [--] [&lt;user_id&gt;]...

 Arguments:
   user_id                Will rescan all files of the given user(s)

 Options:
       --output[=OUTPUT]  Output format (plain, json or json_pretty, default is plain) [default: "plain"]
   -p, --path=PATH        Limit rescan to this path, eg. --path="/alice/files/Music", the user_id is determined by the path and the user_id parameter and --all are ignored
   -q, --quiet            Do not output any message
       --all              Will rescan all files of all known users
       --repair           Will repair detached filecache entries (slow)
       --unscanned        Only scan files which are marked as not fully scanned
   -h, --help             Display this help message
   -V, --version          Display this application version
       --ansi             Force ANSI output
       --no-ansi          Disable ANSI output
   -n, --no-interaction   Do not ask any interactive question
       --no-warnings      Skip global warnings, show command output only
   -v|vv|vvv, --verbose   Increase the verbosity of messages: 1 for normal output, 2 for more verbose output and 3 for debug</pre>
</div>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>If not using <code>--quiet</code>, statistics will be shown at the end of the scan.</p>
</div>
</blockquote>
</div>
<div class="sect3">
<h4 id="the---path-option"><a class="anchor" href="#the---path-option"></a>The <code>--path</code> Option</h4>
<div class="paragraph">
<p>When using the <code>--path</code> option, the path must be in one of the following
formats:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>"user_id/files/path"
"user_id/files/mount_name"
"user_id/files/mount_name/path"</pre>
</div>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>--path="/alice/files/Music"</pre>
</div>
</div>
<div class="paragraph">
<p>In the example above, the user_id <code>alice</code> is determined implicitly from
the path component given.</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Mounts are only scannable at the point of origin. Scanning of shares
including federated shares is not necessary on the receiver side and
therefore not possible.</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>The <code>--path</code>, <code>--all</code> and <code>[user_id]</code> parameters are exclusive - only
one must be specified.</p>
</div>
</div>
<div class="sect3">
<h4 id="the---repair-option"><a class="anchor" href="#the---repair-option"></a>The <code>--repair</code> Option</h4>
<div class="paragraph">
<p>As noted above, repairs can be performed for individual users, groups of
users, and for all users in an ownCloud installation. What’s more,
repair scans can be run even if no files are known to need repairing and
if one or more files are known to be in need of repair. Two examples of
when files need repairing are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If folders have the same entry twice in the web UI (known as a
&#8220;<em>ghost folder</em>&#8221;), this can also lead to strange error messages in
the desktop client.</p>
</li>
<li>
<p>If entering a folder doesn’t seem to lead into that folder.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The repair command needs to be run in single user mode. The following
commands show how to enable single user mode, run a repair file scan,
and then disable single user mode.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>sudo -u www-data php occ maintenance:singleuser --on
sudo -u www-data php occ files:scan --all --repair
sudo -u www-data php occ maintenance:singleuser --off</pre>
</div>
</div>
<div class="paragraph">
<p>We strongly suggest that you backup the database before running this
command.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="the-filestransfer-ownership-command"><a class="anchor" href="#the-filestransfer-ownership-command"></a>The files:transfer-ownership command</h3>
<div class="paragraph">
<p>You may transfer all files and shares from one user to another. This is
useful before removing a user. For example, to move all files from
<code>&lt;source-user&gt;</code> to <code>&lt;destination-user&gt;</code>, use the following command:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>sudo -u www-data php occ files:transfer-ownership &lt;source-user&gt; &lt;destination-user&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>You can also move a limited set of files from <code>&lt;source-user&gt;</code> to
<code>&lt;destination-user&gt;</code> by making use of the <code>--path</code> switch, as in the
example below. In it, <code>folder/to/move</code>, and any file and folder inside
it will be moved to <code>&lt;destination-user&gt;</code>.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>sudo -u www-data php occ files:transfer-ownership --path="folder/to/move" &lt;source-user&gt; &lt;destination-user&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>When using this command, please keep in mind:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>The directory provided to the <code>--path</code> switch <strong>must</strong> exist inside
<code>data/&lt;source-user&gt;/files</code>.</p>
</li>
<li>
<p>The directory (and its contents) won’t be moved as is between the
users. It’ll be moved inside the destination user’s <code>files</code> directory,
and placed in a directory which follows the format:
<code>transferred from &lt;source-user&gt; on &lt;timestamp&gt;</code>. Using the example
above, it will be stored under:
<code>data/&lt;destination-user&gt;/files/transferred from &lt;source-user&gt; on 20170426_124510/</code></p>
</li>
<li>
<p>Currently file versions can’t be transferred. Only the latest
version of moved files will appear in the destination user’s account.</p>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="files-external"><a class="anchor" href="#files-external"></a>Files External</h2>
<div class="sectionbody">
<div class="paragraph">
<p>These commands replace the <code>data/mount.json</code> configuration file used in
ownCloud releases before 9.0.</p>
</div>
<div class="paragraph">
<p>Commands for managing external storage.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sourceCode hljs" data-lang="sourceCode">files_external
 files_external:applicable  Manage applicable users and groups for a mount
 files_external:backends    Show available authentication and storage backends
 files_external:config      Manage backend configuration for a mount
 files_external:create      Create a new mount configuration
 files_external:delete      Delete an external mount
 files_external:export      Export mount configurations
 files_external:import      Import mount configurations
 files_external:list        List configured mounts
 files_external:option      Manage mount options for a mount
 files_external:verify      Verify mount configuration</code></pre>
</div>
</div>
<div class="paragraph">
<p>These commands replicate the functionality in the ownCloud Web GUI, plus
two new features: <code>files_external:export</code> and <code>files_external:import</code>.</p>
</div>
<div class="paragraph">
<p>Use <code>files_external:export</code> to export all admin mounts to stdout, and
<code>files_external:export [user_id]</code> to export the mounts of the specified
ownCloud user.</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>These commands are only available when the &#8220;External storage support&#8221;
app (<code>files_external</code>) is enabled. It is not available in
single-user (maintenance) mode &lt;maintenance_commands_label&gt;.</p>
</div>
</blockquote>
</div>
</div>
</div>
<div class="sect1">
<h2 id="group-commands"><a class="anchor" href="#group-commands"></a>Group Commands</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <code>group</code> commands provide a range of functionality for managing
ownCloud groups. This includes creating and removing groups and managing
group membership. Group names are case-sensitive, so &#8220;Finance&#8221; and
&#8220;finance&#8221; are two different groups.</p>
</div>
<div class="paragraph">
<p>The full list of commands is:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sourceCode hljs" data-lang="sourceCode">group
 group:add                           Adds a group
 group:add-member                    Add members to a group
 group:delete                        Deletes the specified group
 group:list                          List groups
 group:list-members                  List group members
 group:remove-member                 Remove member(s) from a group</code></pre>
</div>
</div>
<div class="sect2">
<h3 id="creating-groups"><a class="anchor" href="#creating-groups"></a>Creating Groups</h3>
<div class="paragraph">
<p>You can create a new group with the <code>group:add</code> command. The syntax is:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>group:add groupname</pre>
</div>
</div>
<div class="paragraph">
<p>This example adds a new group, called &#8220;Finance&#8221;:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>sudo -u www-data php occ group:add Finance
  Created group "Finance"</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="listing-groups"><a class="anchor" href="#listing-groups"></a>Listing Groups</h3>
<div class="paragraph">
<p>You can list the names of existing groups with the <code>group:list</code> command.
The syntax is:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>group:list [options] [&lt;search-pattern&gt;]</pre>
</div>
</div>
<div class="paragraph">
<p>Groups containing the <code>search-pattern</code> string are listed. Matching is
not case-sensitive. If you do not provide a search-pattern then all
groups are listed.</p>
</div>
<div class="paragraph">
<p>Options:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>--output[=OUTPUT]  Output format (plain, json or json_pretty, default is plain) [default: "plain"]</pre>
</div>
</div>
<div class="paragraph">
<p>This example lists groups containing the string &#8220;finance&#8221;.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>sudo -u www-data php occ group:list finance
 - All-Finance-Staff
 - Finance
 - Finance-Managers</pre>
</div>
</div>
<div class="paragraph">
<p>This example lists groups containing the string &#8220;finance&#8221; formatted
with <code>json_pretty</code>.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>sudo -u www-data php occ group:list --output=json_pretty finance
 [
   "All-Finance-Staff",
   "Finance",
   "Finance-Managers"
 ]</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="listing-group-members"><a class="anchor" href="#listing-group-members"></a>Listing Group Members</h3>
<div class="paragraph">
<p>You can list the user IDs of group members with the <code>group:list-members</code>
command. The syntax is:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>group:list-members [options] &lt;group&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>Options:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>--output[=OUTPUT]  Output format (plain, json or json_pretty, default is plain) [default: "plain"]</pre>
</div>
</div>
<div class="paragraph">
<p>This example lists members of the &#8220;Finance&#8221; group.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>sudo -u www-data php occ group:list-members Finance
 - aaron: Aaron Smith
 - julie: Julie Jones</pre>
</div>
</div>
<div class="paragraph">
<p>This example lists members of the Finance group formatted with
<code>json_pretty</code>.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>sudo -u www-data php occ group:list-members --output=json_pretty Finance
 {
   "aaron": "Aaron Smith",
   "julie": "Julie Jones"
 }</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="adding-members-to-groups"><a class="anchor" href="#adding-members-to-groups"></a>Adding Members to Groups</h3>
<div class="paragraph">
<p>You can add members to an existing group with the <code>group:add-member</code>
command. Members must be existing users. The syntax is</p>
</div>
<div class="literalblock">
<div class="content">
<pre>group:add-member [-m|--member [MEMBER]] &lt;group&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>This example adds members &#8220;aaron&#8221; and &#8220;julie&#8221; to group &#8220;Finance&#8221;:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>sudo -u www-data php occ group:add-member --member aaron --member julie Finance
  User "aaron" added to group "Finance"
  User "julie" added to group "Finance"</pre>
</div>
</div>
<div class="paragraph">
<p>You may attempt to add members that are already in the group, without
error. This allows you to add members in a scripted way without needing
to know if the user is already a member of the group. For example:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>sudo -u www-data php occ group:add-member --member aaron --member julie --member fred Finance
  User "aaron" is already a member of group "Finance"
  User "julie" is already a member of group "Finance"
  User fred" added to group "Finance"</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="removing-members-from-groups"><a class="anchor" href="#removing-members-from-groups"></a>Removing Members from Groups</h3>
<div class="paragraph">
<p>You can remove members from a group with the <code>group:remove-member</code>
command. The syntax is:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>group:remove-member [-m|--member [MEMBER]] &lt;group&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>This example removes members &#8220;aaron&#8221; and &#8220;julie&#8221; from group
&#8220;Finance&#8221;.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>sudo -u www-data php occ group:remove-member --member aaron --member julie Finance
  Member "aaron" removed from group "Finance"
  Member "julie" removed from group "Finance"</pre>
</div>
</div>
<div class="paragraph">
<p>You may attempt to remove members that have already been removed from
the group, without error. This allows you to remove members in a
scripted way without needing to know if the user is still a member of
the group. For example:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>sudo -u www-data php occ group:remove-member --member aaron --member fred Finance
  Member "aaron" could not be found in group "Finance"
  Member "fred" removed from group "Finance"</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="deleting-a-group"><a class="anchor" href="#deleting-a-group"></a>Deleting a Group</h3>
<div class="paragraph">
<p>To delete a group, you use the <code>group:delete</code> command, as in the example
below:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>sudo -u www-data php occ group:delete Finance</pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="integrity-check"><a class="anchor" href="#integrity-check"></a>Integrity Check</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Apps which have an official tag MUST be code signed. Unsigned official
apps won’t be installable anymore. Code signing is optional for all
third-party applications.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sourceCode hljs" data-lang="sourceCode">integrity
 integrity:check-app                 Check app integrity using a signature.
 integrity:check-core                Check core integrity using a signature.
 integrity:sign-app                  Signs an app using a private key.
 integrity:sign-core                 Sign core using a private key</code></pre>
</div>
</div>
<div class="paragraph">
<p>After creating your signing key, sign your app like this example:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>sudo -u www-data php occ integrity:sign-app --privateKey=/Users/karlmay/contacts.key --certificate=/Users/karlmay/CA/contacts.crt --path=/Users/karlmay/Programming/contacts</pre>
</div>
</div>
<div class="paragraph">
<p>Verify your app:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>sudo -u www-data php occ integrity:check-app --path=/pathto/app appname</pre>
</div>
</div>
<div class="paragraph">
<p>When it returns nothing, your app is signed correctly. When it returns a
message then there is an error. See
<a href="https://doc.owncloud.org/server/latest/developer_manual/app/code_signing.html#how-to-get-your-app-signed">Code
Signing</a> in the Developer manual for more detailed information.</p>
</div>
<div class="paragraph">
<p><code>integrity:sign-core</code> is for ownCloud core developers only.</p>
</div>
<div class="paragraph">
<p>See ../../issues/code_signing to learn more.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="l10n-create-javascript-translation-files-for-apps"><a class="anchor" href="#l10n-create-javascript-translation-files-for-apps"></a>l10n, Create Javascript Translation Files for Apps</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This command creates JavaScript and JSON translation files for ownCloud
applications.</p>
</div>
<div class="paragraph">
<p>The command does not update existing translations if the source
translation file has been updated. It only creates translation files
when none are present for a given language.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sourceCode hljs" data-lang="sourceCode">l10n
  l10n:createjs                Create Javascript translation files for a given app</code></pre>
</div>
</div>
<div class="paragraph">
<p>The command takes two parameters; these are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>app</code>: the name of the application.</p>
</li>
<li>
<p><code>lang</code>: the output language of the translation files; more than one
can be supplied.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>To create the two translation files, the command reads translation data
from a source PHP translation file.</p>
</div>
<div class="sect2">
<h3 id="a-working-example"><a class="anchor" href="#a-working-example"></a>A Working Example</h3>
<div class="paragraph">
<p>In this example, we’ll create Austrian German translations for the
Gallery app.</p>
</div>
<div class="paragraph">
<p>This example assumes that the ownCloud directory is /var/www/owncloud`
and that it uses ownCloud’s standard apps directory, <code>app</code>.</p>
</div>
<div class="paragraph">
<p>First, create a source translation file in
<code>/var/www/owncloud/apps/gallery/l10n</code>, called <code>de_AT.php</code>. In it, add
the required translation strings, as in the following example. Refer to
the developer documentation on
<a href="https://doc.owncloud.org/server/latest/developer_manual/app/advanced/l10n.html#creating-translatable-files-label">creating
translation files</a>, if you’re not familiar with creating them.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sourceCode hljs" data-lang="sourceCode">&lt;?php
// The source string is the key, the translated string is the value.
$TRANSLATIONS = [
  "Share" =&gt; "Freigeben"
];
$PLURAL_FORMS = "nplurals=2; plural=(n != 1);";</code></pre>
</div>
</div>
<div class="paragraph">
<p>After that, run the following command to create the translation.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>sudo -u www-data php occ l10n:createjs gallery de_AT</pre>
</div>
</div>
<div class="paragraph">
<p>This will generate two translation files, <code>de_AT.js</code> and <code>de_AT.json</code>,
in <code>/var/www/owncloud/apps/gallery/l10n</code>.</p>
</div>
<div class="sect3">
<h4 id="create-translations-in-multiple-languages"><a class="anchor" href="#create-translations-in-multiple-languages"></a>Create Translations in Multiple Languages</h4>
<div class="paragraph">
<p>To create translations in multiple languages simultaneously, supply
multiple languages to the command, as in the following example:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>sudo -u www-data php occ l10n:createjs gallery de_AT de_DE hu_HU es fr</pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="ldap-commands"><a class="anchor" href="#ldap-commands"></a>LDAP Commands</h2>
<div class="sectionbody">
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>These commands are only available when the &#8220;LDAP user and group
backend&#8221; app (<code>user_ldap</code>) is enabled.</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>These LDAP commands appear only when you have enabled the LDAP app. Then
you can run the following LDAP commands with <code>occ</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sourceCode hljs" data-lang="sourceCode">ldap
 ldap:check-user               Checks whether a user exists on LDAP.
 ldap:create-empty-config      Creates an empty LDAP configuration
 ldap:delete-config            Deletes an existing LDAP configuration
 ldap:search                   Executes a user or group search
 ldap:set-config               Modifies an LDAP configuration
 ldap:show-config              Shows the LDAP configuration
 ldap:test-config              Tests an LDAP configuration
 ldap:update-group             Update the specified group membership
                               Information stored locally</code></pre>
</div>
</div>
<div class="paragraph">
<p>Search for an LDAP user, using this syntax:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>sudo -u www-data php occ ldap:search [--group] [--offset="..."]
[--limit="..."] search</pre>
</div>
</div>
<div class="paragraph">
<p>Searches will match at the beginning of the attribute value only. This
example searches for <code>givenNames</code> that start with &#8220;rob&#8221;:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>sudo -u www-data php occ ldap:search "rob"</pre>
</div>
</div>
<div class="paragraph">
<p>This will find robbie, roberta, and robin. Broaden the search to find,
for example, <code>jeroboam</code> with the asterisk wildcard:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>sudo -u www-data php occ ldap:search "*rob"</pre>
</div>
</div>
<div class="paragraph">
<p>User search attributes are set with <code>ldap:set-config</code> (below). For
example, if your search attributes are <code>givenName</code> and <code>sn</code> you can find
users by first name + last name very quickly. For example, you’ll find
Terri Hanson by searching for <code>te ha</code>. Trailing whitespace is ignored.</p>
</div>
<div class="paragraph">
<p>Check if an LDAP user exists. This works only if the ownCloud server is
connected to an LDAP server.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>sudo -u www-data php occ ldap:check-user robert</pre>
</div>
</div>
<div class="paragraph">
<p><code>ldap:check-user</code> will not run a check when it finds a disabled LDAP
connection. This prevents users that exist on disabled LDAP connections
from being marked as deleted. If you know for certain that the user you
are searching for is not in one of the disabled connections, and exists
on an active connection, use the <code>--force</code> option to force it to check
all active LDAP connections.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>sudo -u www-data php occ ldap:check-user --force robert</pre>
</div>
</div>
<div class="paragraph">
<p><code>ldap:create-empty-config</code> creates an empty LDAP configuration. The
first one you create has no <code>configID</code>, like this example:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>sudo -u www-data php occ ldap:create-empty-config
  Created new configuration with configID ''</pre>
</div>
</div>
<div class="paragraph">
<p>This is a holdover from the early days, when there was no option to
create additional configurations. The second, and all subsequent,
configurations that you create are automatically assigned IDs.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>sudo -u www-data php occ ldap:create-empty-config
   Created new configuration with configID 's01'</pre>
</div>
</div>
<div class="paragraph">
<p>Then you can list and view your configurations:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>sudo -u www-data php occ ldap:show-config</pre>
</div>
</div>
<div class="paragraph">
<p>And view the configuration for a single <code>configID</code>:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>sudo -u www-data php occ ldap:show-config s01</pre>
</div>
</div>
<div class="paragraph">
<p><code>ldap:delete-config [configID]</code> deletes an existing LDAP configuration.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>sudo -u www-data php occ ldap:delete  s01
Deleted configuration with configID 's01'</pre>
</div>
</div>
<div class="paragraph">
<p>The <code>ldap:set-config</code> command is for manipulating configurations, like
this example that sets search attributes:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>sudo -u www-data php occ ldap:set-config s01 ldapAttributesForUserSearch
"cn;givenname;sn;displayname;mail"</pre>
</div>
</div>
<div class="paragraph">
<p>The command takes the following format:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>ldap:set-config &lt;configID&gt; &lt;configKey&gt; &lt;configValue&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>All of the available keys, along with default values for configValue,
are listed in the table below.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Configuration</th>
<th class="tableblock halign-left valign-top">Setting</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">hasMemberOfFilterSupport</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">hasPagedResultSupport</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">homeFolderNamingRule</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">lastJpegPhotoLookup</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ldapAgentName</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">cn=admin,dc=owncloudqa,dc=com</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ldapAgentPassword</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>*</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ldapAttributesForGroupSearch</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ldapAttributesForUserSearch</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ldapBackupHost</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ldapBackupPort</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ldapBase</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">dc=owncloudqa,dc=com</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ldapBaseGroups</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">dc=owncloudqa,dc=com</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ldapBaseUsers</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">dc=owncloudqa,dc=com</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ldapCacheTTL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">600</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ldapConfigurationActive</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ldapDynamicGroupMemberURL</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ldapEmailAttribute</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ldapExperiencedAdmin</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ldapExpertUUIDGroupAttr</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ldapExpertUUIDUserAttr</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ldapExpertUsernameAttr</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ldapGroupDisplayName cn</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ldapGroupFilter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ldapGroupFilterGroups</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ldapGroupFilterMode</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ldapGroupFilterObjectclass</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ldapGroupMemberAssocAttr</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">uniqueMember</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ldapHost</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ldap://host</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ldapIgnoreNamingRules</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ldapLoginFilter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(&amp;objectclass=inetOrgPerson(uid=%uid))</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ldapLoginFilterAttributes</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ldapLoginFilterEmail</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ldapLoginFilterMode</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ldapLoginFilterUsername</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ldapNestedGroups</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ldapOverrideMainServer</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ldapPagingSize</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">500</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ldapPort</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">389</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ldapQuotaAttribute</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ldapQuotaDefault</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ldapTLS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ldapUserDisplayName</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">displayName</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ldapUserDisplayName2</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ldapUserFilter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">objectclass=inetOrgPerson</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ldapUserFilterGroups</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ldapUserFilterMode</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ldapUserFilterObjectclass</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">inetOrgPerson</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ldapUuidGroupAttribute</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">auto</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ldapUuidUserAttribute</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">auto</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">turnOffCertCheck</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">useMemberOfToDetectMembership</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><code>ldap:test-config</code> tests whether your configuration is correct and can
bind to the server.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>sudo -u www-data php occ ldap:test-config s01
The configuration is valid and the connection could be established!</pre>
</div>
</div>
<div class="paragraph">
<p><code>ldap:update-group</code> updates the specified group membership information
stored locally.</p>
</div>
<div class="paragraph">
<p>The command takes the following format:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>ldap:update-group &lt;groupID&gt; &lt;groupID &lt;groupID&gt; ...&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>The command allows for running a manual group sync on one or more
groups, instead of having to wait for group syncing to occur. If users
have been added or removed from these groups in LDAP, ownCloud will
update its details. If a group was deleted in LDAP, ownCloud will also
delete the local mapping info about this group.</p>
</div>
<div class="paragraph">
<p>New groups in LDAP won’t be synced with this command. The LDAP TTL
configuration (by default 10 minutes) still applies. This means that
recently deleted groups from LDAP might be considered as &#8220;active&#8221; and
might not be deleted in ownCloud immediately.</p>
</div>
<div class="paragraph">
<p><strong>Configuring the LDAP Refresh Attribute Interval</strong></p>
</div>
<div class="paragraph">
<p>You can configure the LDAP refresh attribute interval, but not with the
<code>ldap</code> commands. Instead, you need to use the <code>config:app:set</code> command,
as in the following example, which takes a number of seconds to the
<code>--value</code> switch.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>sudo -u www-data php occ config:app:set user_ldap updateAttributesInterval --value=7200</pre>
</div>
</div>
<div class="paragraph">
<p>In the example above, the interval is being set to 7200 seconds.
Assuming the above example was used, the command would output the
following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sourceCode hljs" data-lang="sourceCode">Config value updateAttributesInterval for app user_ldap set to 7200</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you want to reset (or unset) the setting, then you can use the
following command:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>sudo -u www-data php occ config:app:delete user_ldap updateAttributesInterval</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="logging-commands"><a class="anchor" href="#logging-commands"></a>Logging Commands</h2>
<div class="sectionbody">
<div class="paragraph">
<p>These commands view and configure your ownCloud logging preferences.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sourceCode hljs" data-lang="sourceCode">log
 log:manage     Manage logging configuration
 log:owncloud   Manipulate ownCloud logging backend</code></pre>
</div>
</div>
<div class="paragraph">
<p>Run <code>log:owncloud</code> to see your current logging status:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>sudo -u www-data php occ log:owncloud
Log backend ownCloud: enabled
Log file: /opt/owncloud/data/owncloud.log
Rotate at: disabled</pre>
</div>
</div>
<div class="paragraph">
<p>Options for <code>log:owncloud</code>:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>--enable                   Enable this logging backend
--file=FILE                Set the log file path
--rotate-size=ROTATE-SIZE  Set the file size for log rotation, 0 = disabled</pre>
</div>
</div>
<div class="paragraph">
<p>Use the <code>--enable</code> option to turn on logging. Use <code>--file</code> to set a
different log file path. Set your rotation by log file size in bytes
with <code>--rotate-size</code>; 0 disables rotation.</p>
</div>
<div class="paragraph">
<p>Run <code>log:manage</code> to set your logging backend, log level, and timezone:</p>
</div>
<div class="paragraph">
<p>The defaults are <code>owncloud</code>, <code>Warning</code>, and <code>UTC</code>.</p>
</div>
<div class="paragraph">
<p>Options for <code>log:manage</code>:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>--backend=BACKEND    set the logging backend [owncloud, syslog, errorlog]
--level=LEVEL        set the log level [debug, info, warning, error, fatal]</pre>
</div>
</div>
<div class="paragraph">
<p>Log level can be adjusted by entering the number or the name:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>sudo -u www-data php occ log:manage --level 4
sudo -u www-data php occ log:manage --level error</pre>
</div>
</div>
<div class="paragraph">
<p>Setting the log level to debug ( 0 ) can be used for finding the cause
of an error, but should not be the standard as it increases the log file
size.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="maintenance-commands"><a class="anchor" href="#maintenance-commands"></a>Maintenance Commands</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Use these commands when you upgrade ownCloud, manage encryption, perform
backups and other tasks that require locking users out until you are
finished.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sourceCode hljs" data-lang="sourceCode">maintenance
 maintenance:data-fingerprint        Update the systems data-fingerprint after a backup is restored
 maintenance:mimetype:update-db      Update database mimetypes and update filecache
 maintenance:mimetype:update-js      Update mimetypelist.js
 maintenance:mode                    Set maintenance mode
 maintenance:repair                  Repair this installation
 maintenance:singleuser              Set single user mode
 maintenance:update:htaccess         Updates the .htaccess file</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>maintenance:mode</code> locks the sessions of all logged-in users, including
administrators, and displays a status screen warning that the server is
in maintenance mode. Users who are not already logged in cannot log in
until maintenance mode is turned off. When you take the server out of
maintenance mode logged-in users must refresh their Web browsers to
continue working.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>sudo -u www-data php occ maintenance:mode --on
sudo -u www-data php occ maintenance:mode --off</pre>
</div>
</div>
<div class="paragraph">
<p>Putting your ownCloud server into single-user mode allows admins to log
in and work, but not ordinary users. This is useful for performing
maintenance and troubleshooting on a running server.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>sudo -u www-data php occ maintenance:singleuser --on
Single user mode enabled</pre>
</div>
</div>
<div class="paragraph">
<p>Turn it off when you’re finished:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>sudo -u www-data php occ maintenance:singleuser --off
Single user mode disabled</pre>
</div>
</div>
<div class="paragraph">
<p>Run <code>maintenance:data-fingerprint</code> to tell desktop and mobile clients
that a server backup has been restored. Users will be prompted to
resolve any conflicts between newer and older file versions.</p>
</div>
<div class="paragraph">
<p>Run <code>maintenance:data-fingerprint</code> to tell desktop and mobile clients
that a server backup has been restored. This command changes the ETag
for all files in the communication with sync clients, informing them
that one or more files were modified. After the command completes, users
will be prompted to resolve any conflicts between newer and older file
versions.</p>
</div>
<div class="paragraph">
<p>The <code>maintenance:repair</code> command runs automatically during upgrades to
clean up the database, so while you can run it manually there usually
isn’t a need to.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>sudo -u www-data php occ maintenance:repair</pre>
</div>
</div>
<div class="paragraph">
<p><code>maintenance:mimetype:update-db</code> updates the ownCloud database and file
cache with changed mimetypes found in <code>config/mimetypemapping.json</code>. Run
this command after modifying <code>config/mimetypemapping.json</code>. If you
change a mimetype, run
<code>maintenance:mimetype:update-db --repair-filecache</code> to apply the change
to existing files.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="market"><a class="anchor" href="#market"></a>Market</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <code>market</code> commands <em>install</em>, <em>list</em>, and <em>upgrade</em> applications from
the ownCloud Marketplace.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sourceCode hljs" data-lang="sourceCode">market
  market:install    Install apps from the marketplace. If already installed and
                    an update is available the update will be installed.
  market:list       Lists apps as available on the marketplace.
  market:upgrade    Installs new app versions if available on the marketplace</code></pre>
</div>
</div>
<div class="paragraph">
<p>The user running the update command, which will likely be your webserver
user, needs write permission for the <code>/apps</code> folder. If they don’t have
write permission, the command may report that the update was successful,
but it may silently fail.</p>
</div>
<div class="paragraph">
<p>These commands are not available in
single-user (maintenance) mode &lt;maintenance_commands_label&gt;.</p>
</div>
<div class="sect2">
<h3 id="install-an-application"><a class="anchor" href="#install-an-application"></a>Install an Application</h3>
<div class="paragraph">
<p>Applications can be installed both from
<a href="https://marketplace.owncloud.com/">the ownCloud Marketplace</a> and from a
local file archive.</p>
</div>
<div class="sect3">
<h4 id="install-apps-from-the-marketplace"><a class="anchor" href="#install-apps-from-the-marketplace"></a>Install Apps From The Marketplace</h4>
<div class="paragraph">
<p>To install an application from the Marketplace, you need to supply the
app’s id, which can be found in the app’s Marketplace URL. For example,
the URL for <em>Two factor backup codes</em> is
<a href="https://marketplace.owncloud.com/apps/twofactor_backup_codes" class="bare">https://marketplace.owncloud.com/apps/twofactor_backup_codes</a>. So its app
id is <code>twofactor_backup_codes</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="install-apps-from-a-file-archive"><a class="anchor" href="#install-apps-from-a-file-archive"></a>Install Apps From a File Archive</h4>
<div class="paragraph">
<p>To install an application from a local file archive, you need to supply
the path to the archive, and that you pass the <code>-l</code> switch. Only <code>zip</code>,
<code>gzip</code>, and <code>bzip2</code> archives are supported.</p>
</div>
</div>
<div class="sect3">
<h4 id="usage-example"><a class="anchor" href="#usage-example"></a>Usage Example</h4>
<div class="literalblock">
<div class="content">
<pre># Install an app from the marketplace.
sudo -u www-data occ market:install twofactor_backup_codes

# Install an app from a local archive.
sudo -u www-data occ market:install -l /mnt/data/richdocuments-2.0.0.tar.gz</pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="notifications"><a class="anchor" href="#notifications"></a>Notifications</h2>
<div class="sectionbody">
<div class="paragraph">
<p>If you want to send notifications to users or groups use the following
command.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sourceCode hljs" data-lang="sourceCode">notifications
  notifications:generate   Generates a notification.</code></pre>
</div>
</div>
<div class="paragraph">
<p>Options and Arguments:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>notifications:generate [-u|--user USER] [-g|--group GROUP] [-l|--link &lt;linktext&gt;] [--] &lt;subject&gt; [&lt;message&gt;]

Options:
  -u --user              User id to whom the notification shall be sent
  -g --group             Group id to whom the notification shall be sent
  -l --link              A link associated with the notification

Arguments:
  subject                The notification subject - maximum 255 characters
  message                A longer message - maximum 4000 characters
  linktext               A link to an HTML page</pre>
</div>
</div>
<div class="paragraph">
<p>At least one user or group must be set.</p>
</div>
<div class="paragraph">
<p>A link can be useful for notifications shown in client apps.</p>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>sudo -u www-data php occ notifications:generate -g Office "Emergeny Alert" "Rebooting in 5min"</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="reports"><a class="anchor" href="#reports"></a>Reports</h2>
<div class="sectionbody">
<div class="paragraph">
<p>If you’re working with ownCloud support and need to send them a
configuration summary, you can generate it using the
<code>configreport:generate</code> command. This command generates the same
JSON-based report as the Admin Config Report, which you can access under
<code>admin -&gt; Settings -&gt; Admin -&gt; Help &amp; Tips -&gt; Download ownCloud config report</code>.</p>
</div>
<div class="paragraph">
<p>From the command-line in the root directory of your ownCloud
installation, run it as your webserver user as follows, (assuming your
webserver user is <code>www-data</code>):</p>
</div>
<div class="literalblock">
<div class="content">
<pre>sudo -u www-data occ configreport:generate</pre>
</div>
</div>
<div class="paragraph">
<p>This will generate the report and send it to <code>STDOUT</code>. You can
optionally pipe the output to a file and then attach it to an email to
ownCloud support, by running the following command:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>sudo -u www-data occ configreport:generate &gt; generated-config-report.txt</pre>
</div>
</div>
<div class="paragraph">
<p>Alternatively, you could generate the report and email it all in one
command, by running:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>sudo -u www-data occ configreport:generate | mail -s "configuration report" \
    -r &lt;the email address to send from&gt; \
    support@owncloud.com</pre>
</div>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>These commands are not available in
single-user (maintenance) mode &lt;maintenance_commands_label&gt;.</p>
</div>
</blockquote>
</div>
</div>
</div>
<div class="sect1">
<h2 id="security"><a class="anchor" href="#security"></a>Security</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Use these commands when you manage security related tasks</p>
</div>
<div class="paragraph">
<p>Routes dispays all routes of ownCloud. You can use this information to
grant strict access via firewalls, proxies or loadbalancers etc.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sourceCode hljs" data-lang="sourceCode">security:routes [options]</code></pre>
</div>
</div>
<div class="paragraph">
<p>Options:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>--output    Output format (plain, json or json-pretty, default is plain)
--with-details  Adds more details to the output</pre>
</div>
</div>
<div class="paragraph">
<p>Example 1:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>sudo -uwww-data ./occ security:routes</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>+-----------------------------------------------------------+-----------------+
| Path                                                      | Methods         |
+-----------------------------------------------------------+-----------------+
| /apps/federation/auto-add-servers                         | POST            |
| /apps/federation/trusted-servers                          | POST            |
| /apps/federation/trusted-servers/{id}                     | DELETE          |
| /apps/files/                                              | GET             |
| /apps/files/ajax/download.php                             |                 |
...</pre>
</div>
</div>
<div class="paragraph">
<p>Example 2:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>sudo  -uwww-data ./occ security:routes --output=json-pretty</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>[
  {
      "path": "\/apps\/federation\/auto-add-servers",
      "methods": [
          "POST"
      ]
  },
...</pre>
</div>
</div>
<div class="paragraph">
<p>Example 3:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>sudo  -uwww-data ./occ security:routes --with-details</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>+---------------------------------------------+---------+-------------------------------------------------------+--------------------------------+
| Path                                        | Methods | Controller                                            | Annotations                    |
+---------------------------------------------+---------+-------------------------------------------------------+--------------------------------+
| /apps/files/api/v1/sorting                  | POST    | OCA\Files\Controller\ApiController::updateFileSorting | NoAdminRequired                |
| /apps/files/api/v1/thumbnail/{x}/{y}/{file} | GET     | OCA\Files\Controller\ApiController::getThumbnail      | NoAdminRequired,NoCSRFRequired |
...</pre>
</div>
</div>
<div class="verseblock">
<pre class="content"></pre>
</div>
<div class="paragraph">
<p>The following commands manage server-wide SSL certificates. These are
useful when you create federation shares with other ownCloud servers
that use self-signed certificates.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sourceCode hljs" data-lang="sourceCode">security:certificates         List trusted certificates
security:certificates:import  Import trusted certificate
security:certificates:remove  Remove trusted certificate</code></pre>
</div>
</div>
<div class="paragraph">
<p>This example lists your installed certificates:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>sudo -u www-data php occ security:certificates</pre>
</div>
</div>
<div class="paragraph">
<p>Import a new certificate:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>sudo -u www-data php occ security:certificates:import /path/to/certificate</pre>
</div>
</div>
<div class="paragraph">
<p>Remove a certificate:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>sudo -u www-data php occ security:certificates:remove [certificate name]</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="ransomware-protection"><a class="anchor" href="#ransomware-protection"></a>Ransomware Protection</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Use these commands to help users recover from a Ransomware attack. You
can find more information about the application
in the documentation &lt;../../enterprise/ransomware-protection/index&gt;.</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Ransomware Protection (which is an Enterprise app) needs to be installed
and enabled to be able to use these commands.</p>
</div>
</blockquote>
</div>
<div class="literalblock">
<div class="content">
<pre>occ ransomguard:scan &lt;timestamp&gt; &lt;user&gt;     Report all changes in a user's account, starting from timestamp.
occ ransomguard:restore &lt;timestamp&gt; &lt;user&gt;  Revert all operations in a user account after a point in time.
occ ransomguard:lock &lt;user&gt;                 Set a user account as read-only for ownCloud and other WebDAV
                                            clients when malicious activity is suspected.
occ ransomguard:unlock &lt;user&gt;               Unlock a user account after ransomware issues have been resolved.</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="sharing"><a class="anchor" href="#sharing"></a>Sharing</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This is an occ command to cleanup orphaned remote storages. To explain
why this is necessary, a little background is required. While shares are
able to be deleted as a normal matter of course, remote storages with
&#8220;shared::&#8221; are not included in this process.</p>
</div>
<div class="paragraph">
<p>This might not, normally, be a problem. However, if a user has re-shared
a remote share which has been deleted it will. This is because when the
original share is deleted, the remote re-share reference is not.
Internally, the fileid will remain in the file cache and storage for
that file will not be deleted.</p>
</div>
<div class="paragraph">
<p>As a result, any user(s) who the share was re-shared with will now get
an error when trying to access that file or folder. That’s why the
command is available.</p>
</div>
<div class="paragraph">
<p>So, to cleanup all orphaned remote storages, run it as follows:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>sudo -u www-data php occ sharing:cleanup-remote-storages</pre>
</div>
</div>
<div class="paragraph">
<p>You can also set it up to run as
a background job &lt;background-jobs-header&gt;</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>These commands are not available in
single-user (maintenance) mode &lt;maintenance_commands_label&gt;.</p>
</div>
</blockquote>
</div>
</div>
</div>
<div class="sect1">
<h2 id="shibboleth-modes-enterprise-edition-only"><a class="anchor" href="#shibboleth-modes-enterprise-edition-only"></a>Shibboleth Modes (Enterprise Edition only)</h2>
<div class="sectionbody">
<div class="paragraph">
<p><code>shibboleth:mode</code> sets your Shibboleth mode to <code>notactive</code>,
<code>autoprovision</code>, or <code>ssoonly</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sourceCode hljs" data-lang="sourceCode">shibboleth:mode [mode]</code></pre>
</div>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>These commands are only available when the &#8220;Shibboleth user backend&#8221;
app (<code>user_shibboleth</code>) is enabled.</p>
</div>
</blockquote>
</div>
</div>
</div>
<div class="sect1">
<h2 id="trashbin"><a class="anchor" href="#trashbin"></a>Trashbin</h2>
<div class="sectionbody">
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>These commands are only available when the &#8220;Deleted files&#8221; app
(<code>files_trashbin</code>) is enabled. These commands are not available in
single-user (maintenance) mode &lt;maintenance_commands_label&gt;.</p>
</div>
</blockquote>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sourceCode hljs" data-lang="sourceCode">trashbin
 trashbin:cleanup   Remove deleted files
 trashbin:expire    Expires the users trash bin</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>trashbin:cleanup</code> command removes the deleted files of the
specified users in a space-delimited list, or all users if none are
specified. This example removes all the deleted files of all users:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>sudo -u www-data php occ trashbin:cleanup
Remove all deleted files
Remove deleted files for users on backend Database
 freda
 molly
 stash
 rosa
 edward</pre>
</div>
</div>
<div class="paragraph">
<p>This example removes the deleted files of users &#8220;"molly&#8221;" and
&#8220;"freda&#8221;":</p>
</div>
<div class="literalblock">
<div class="content">
<pre>sudo -u www-data php occ trashbin:cleanup molly freda
Remove deleted files of   molly
Remove deleted files of   freda</pre>
</div>
</div>
<div class="paragraph">
<p><code>trashbin:expire</code> deletes only expired files according to the
<code>trashbin_retention_obligation</code> setting in <code>config.php</code> (see the Deleted
Files section in config_sample_php_parameters). The default is to delete
expired files for all users, or you may list users in a space-delimited
list.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="user-commands"><a class="anchor" href="#user-commands"></a>User Commands</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <code>user</code> commands provide a range of functionality for managing
ownCloud users. This includes: creating and removing users, resetting
user passwords, displaying a report which shows how many users you have,
and when a user was last logged in.</p>
</div>
<div class="paragraph">
<p>The full list, of commands is:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sourceCode hljs" data-lang="sourceCode">user
 user:add                            Adds a user
 user:delete                         Deletes the specified user
 user:disable                        Disables the specified user
 user:enable                         Enables the specified user
 user:inactive                       Reports users who are known to owncloud,
                                     but have not logged in for a certain number of days
 user:lastseen                       Shows when the user was logged in last time
 user:list                           List users
 user:list-groups                    List groups for a user
 user:modify                         Modify user details
 user:report                         Shows how many users have access
 user:resetpassword                  Resets the password of the named user
 user:setting                        Read and modify user application settings
 user:sync                           Sync local users with an external backend service</code></pre>
</div>
</div>
<div class="sect2">
<h3 id="creating-users"><a class="anchor" href="#creating-users"></a>Creating Users</h3>
<div class="paragraph">
<p>You can create a new user with the <code>user:add</code> command. This command lets
you set the following attributes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>uid:</strong> The <code>uid</code> is the user’s username and their login name</p>
</li>
<li>
<p><strong>display name:</strong> This corresponds to the <strong>Full Name</strong> on the Users page
in your ownCloud Web UI</p>
</li>
<li>
<p><strong>email address</strong></p>
</li>
<li>
<p><strong>group</strong></p>
</li>
<li>
<p><strong>login name</strong></p>
</li>
<li>
<p><strong>password</strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The command’s syntax is:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sourceCode hljs" data-lang="sourceCode">user:add [--password-from-env] [--display-name [DISPLAY-NAME]] [--email [EMAIL]] [-g|--group [GROUP]] [--] &lt;uid&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>This example adds new user Layla Smith, and adds her to the <strong>users</strong> and
<strong>db-admins</strong> groups. Any groups that do not exist are created.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>sudo -u www-data php occ user:add --display-name="Layla Smith" \
  --group="users" --group="db-admins" --email=layla.smith@example.com layla
  Enter password:
  Confirm password:
  The user "layla" was created successfully
  Display name set to "Layla Smith"
  Email address set to "layla.smith@example.com"
  User "layla" added to group "users"
  User "layla" added to group "db-admins"</pre>
</div>
</div>
<div class="paragraph">
<p>After the command completes, go to your Users page, and you will see
your new user.</p>
</div>
</div>
<div class="sect2">
<h3 id="setting-a-users-password"><a class="anchor" href="#setting-a-users-password"></a>Setting a User’s Password</h3>
<div class="paragraph">
<p><code>password-from-env</code> allows you to set the user’s password from an
environment variable. This prevents the password from being exposed to
all users via the process list, and will only be visible in the history
of the user (root) running the command. This also permits creating
scripts for adding multiple new users.</p>
</div>
<div class="paragraph">
<p>To use <code>password-from-env</code> you must run as &#8220;real&#8221; root, rather than
<code>sudo</code>, because <code>sudo</code> strips environment variables. This example adds
new user Fred Jones:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>export OC_PASS=newpassword
su -s /bin/sh www-data -c 'php occ user:add --password-from-env
  --display-name="Fred Jones" --group="users" fred'
The user "fred" was created successfully
Display name set to "Fred Jones"
User "fred" added to group "users"</pre>
</div>
</div>
<div class="paragraph">
<p>You can reset any user’s password, including administrators (see
../../configuration/user/reset_admin_password):</p>
</div>
<div class="literalblock">
<div class="content">
<pre>sudo -u www-data php occ user:resetpassword layla
  Enter a new password:
  Confirm the new password:
  Successfully reset password for layla</pre>
</div>
</div>
<div class="paragraph">
<p>You may also use <code>password-from-env</code> to reset passwords:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>export OC_PASS=newpassword
sudo -u www-data php occ user:resetpassword --password-from-env layla
  Successfully reset password for layla</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="deleting-a-user"><a class="anchor" href="#deleting-a-user"></a>Deleting A User</h3>
<div class="paragraph">
<p>To delete a user, you use the <code>user:delete</code> command, as in the example
below:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>sudo -u www-data php occ user:delete fred</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="listing-users"><a class="anchor" href="#listing-users"></a>Listing Users</h3>
<div class="paragraph">
<p>You can list existing users with the <code>user:list</code> command. The syntax is</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sourceCode hljs" data-lang="sourceCode">user:list [options] [&lt;search-pattern&gt;]</code></pre>
</div>
</div>
<div class="paragraph">
<p>User IDs containing the <code>search-pattern</code> string are listed. Matching is
not case-sensitive. If you do not provide a search-pattern then all
users are listed.</p>
</div>
<div class="paragraph">
<p>Options:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>--output[=OUTPUT]          Output format (plain, json or json-pretty, default is plain)
-a, --attributes[=ATTRIBUTES]  Adds more details to the output</pre>
</div>
</div>
<div class="paragraph">
<p>Allowed attributes, multiple values possible</p>
</div>
<div class="literalblock">
<div class="content">
<pre>uid, displayName, email, quota, enabled, lastLogin, home,
backend, cloudId, searchTerms [default: ["displayName"]]</pre>
</div>
</div>
<div class="paragraph">
<p>This example lists user IDs containing the string &#8220;aron&#8221;</p>
</div>
<div class="literalblock">
<div class="content">
<pre>sudo -u www-data php occ user:list ron
 - aaron: Aaron Smith</pre>
</div>
</div>
<div class="paragraph">
<p>The output can be formatted in JSON with the output option <code>json</code> or
<code>json_pretty</code>.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>sudo -u www-data php occ user:list --output=json_pretty
 {
   "aaron": "Aaron Smith",
   "herbert": "Herbert Smith",
   "julie": "Julie Jones"
 }</pre>
</div>
</div>
<div class="paragraph">
<p>This example lists all users including the attribute &#8220;enabled&#8221;.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>sudo -u www-data php occ user:list -a enabled
 - admin: true
 - foo: true</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="listing-group-membership-of-a-user"><a class="anchor" href="#listing-group-membership-of-a-user"></a>Listing Group Membership of a User</h3>
<div class="paragraph">
<p>You can list the group membership of a user with the <code>user:list-groups</code>
command. The syntax is</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sourceCode hljs" data-lang="sourceCode">user:list-groups [options] &lt;uid&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>This example lists group membership of user julie:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>sudo -u www-data php occ user:list-groups julie
 - Executive
 - Finance</pre>
</div>
</div>
<div class="paragraph">
<p>The output can be formatted in JSON with the output option <code>json</code> or
<code>json_pretty</code>:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>sudo -u www-data php occ user:list-groups --output=json_pretty julie
 [
   "Executive",
   "Finance"
 ]</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="finding-the-users-last-login"><a class="anchor" href="#finding-the-users-last-login"></a>Finding The User’s Last Login</h3>
<div class="paragraph">
<p>To view a user’s most recent login, use the <code>user:lastseen</code> command, as
in the example below:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>sudo -u www-data php occ user:lastseen layla
  layla's last login: 09.01.2015 18:46</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="user-application-settings"><a class="anchor" href="#user-application-settings"></a>User Application Settings</h3>
<div class="paragraph">
<p>To manage application settings for a user, use the <code>user:setting</code>
command. This command provides the ability to:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Retrieve all settings for an application</p>
</li>
<li>
<p>Retrieve a single setting</p>
</li>
<li>
<p>Set a setting value</p>
</li>
<li>
<p>Delete a setting</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If you run the command and pass the help switch (<code>--help</code>), you will see
the following output, in your terminal:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sourceCode hljs" data-lang="sourceCode">Usage:
  user:setting [options] [--] &lt;uid&gt; [&lt;app&gt;] [&lt;key&gt;]

Arguments:
  uid    User ID used to login
  app    Restrict the settings to a given app [default: ""]
  key    Setting key to set, get or delete [default: ""]</code></pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>sudo -u www-data php occ user:setting --help</pre>
</div>
</div>
<div class="paragraph">
<p>If you’re new to the <code>user:setting</code> command, the descriptions for the
<code>app</code> and <code>key</code> arguments may not be completely transparent. So, here’s
a lengthier description of both.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Argument</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">app</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">When an value is supplied, <code>user:setting</code> limits the settings</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">displayed, to those for that, specific, application — assuming that</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the application is installed, and that there are settings available</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">for it. Some example applications are &#8220;core&#8221;, &#8220;files_trashbin&#8221;,
and</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8220;user_ldap&#8221;. A complete list, unfortunately, cannot be supplied, as
it</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">is impossible to know the entire list of applications which a user</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">could, potentially, install.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">key</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This value specifies the setting key to be manipulated (set,</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">retrieved, or deleted) by the <code>user:setting</code> command.</p></td>
</tr>
</tbody>
</table>
<div class="sect3">
<h4 id="retrieving-user-settings"><a class="anchor" href="#retrieving-user-settings"></a>Retrieving User Settings</h4>
<div class="paragraph">
<p>To retrieve all settings for a user, you need to call the <code>user:setting</code>
command and supply the user’s username, as in the example below.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>sudo -u www-data php occ user:setting layla
  - core:
    - lang: en
  - login:
    - lastLogin: 1465910968
  - settings:
    - email: layla@example.tld</pre>
</div>
</div>
<div class="paragraph">
<p>Here, we see that the user has settings for the application <code>core</code>, when
they last logged in, and what their email address is.</p>
</div>
<div class="paragraph">
<p>To retrieve the user’s settings for a specific application, you have to
supply the username and the application’s name, which you want to
retrieve the settings for; such as in the example below:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>sudo -u www-data php occ user:setting layla core
 - core:
    - lang: en</pre>
</div>
</div>
<div class="paragraph">
<p>In the output, you can see that one setting is in effect, <code>lang</code>, which
is set to <code>en</code>. To retrieve the value of a single application for a
user, use the <code>user:setting</code> command, as in the example below.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>sudo -u www-data php occ user:setting layla core lang</pre>
</div>
</div>
<div class="paragraph">
<p>This will display the value for that setting, such as <code>en</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="setting-a-setting"><a class="anchor" href="#setting-a-setting"></a>Setting a Setting</h4>
<div class="paragraph">
<p>To set a setting, you need to supply four things; these are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the username</p>
</li>
<li>
<p>the application (or setting category)</p>
</li>
<li>
<p>the <code>--value</code> switch</p>
</li>
<li>
<p>the, quoted, value for that setting</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Here’s an example of how you would set the email address of the user
<code>layla</code>.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>sudo -u www-data php occ user:setting layla settings email --value "new-layla@example.tld"</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="deleting-a-setting"><a class="anchor" href="#deleting-a-setting"></a>Deleting a Setting</h4>
<div class="paragraph">
<p>Deleting a setting is quite similar to setting a setting. In this case,
you supply the username, application (or setting category) and key as
above. Then, in addition, you supply the <code>--delete</code> flag.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>sudo -u www-data php occ user:setting layla settings email --delete</pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="modify-user-details"><a class="anchor" href="#modify-user-details"></a>Modify user details</h3>
<div class="paragraph">
<p>This command modifies either the users username or email address.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sourceCode hljs" data-lang="sourceCode">user:modify [options] [--] &lt;uid&gt; &lt;key&gt; &lt;value&gt;

Arguments:
  uid      User ID used to login
  key      Key to be changed. Valid keys are: displayname, email
  value    The new value of the key</code></pre>
</div>
</div>
<div class="paragraph">
<p>All three arguments are mandatory and can not be empty.</p>
</div>
<div class="paragraph">
<p>Example to set the email address:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>sudo -u www-data php occ user:modify carla email foobar@foo.com</pre>
</div>
</div>
<div class="paragraph">
<p>The email address of <code>carla</code> is updated to <code>foobar@foo.com</code></p>
</div>
</div>
<div class="sect2">
<h3 id="generating-a-user-count-report"><a class="anchor" href="#generating-a-user-count-report"></a>Generating a User Count Report</h3>
<div class="paragraph">
<p>Generate a simple report that counts all users, including users on
external user authentication servers such as LDAP.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>sudo -u www-data php occ user:report
+------------------+----+
| User Report      |    |
+------------------+----+
| Database         | 12 |
| LDAP             | 86 |
|                  |    |
| total users      | 98 |
|                  |    |
| user directories | 2  |
+------------------+----+</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="syncing-user-accounts"><a class="anchor" href="#syncing-user-accounts"></a>Syncing User Accounts</h3>
<div class="paragraph">
<p>This command syncs users stored in external backend services, such as
<em>LDAP</em>, <em>Shibboleth</em>, and <em>Samba</em>, with ownCloud’s, internal, user
database. However, it’s not essential to run it regularly, unless you
have a large number of users whose account properties have changed in a
backend outside of ownCloud. When run, it will pick up changes from
alternative user backends, such as LDAP where properties like <code>cn</code> or
<code>display name</code> have changed, and sync them with ownCloud’s user
database. If accounts are found that no longer exist in the external
backend, you are given the choice of either removing or disabling the
accounts.</p>
</div>
<div class="paragraph">
<p>It’s also one of the commands &lt;available_background_jobs_label&gt; that you
should run on a regular basis to ensure that your ownCloud installation
is running optimally.</p>
</div>
<div class="paragraph">
<p>This command replaces the old <code>show-remnants</code> functionality, and brings
the LDAP feature more in line with the rest of ownCloud’s functionality.</p>
</div>
<div class="paragraph">
<p>Below are examples of how to use the command with an <em>LDAP</em>, <em>Samba</em>,
and <em>Shibboleth</em> backend.</p>
</div>
<div class="sect3">
<h4 id="ldap"><a class="anchor" href="#ldap"></a>LDAP</h4>
<div class="literalblock">
<div class="content">
<pre>sudo -u www-data ./occ user:sync "OCA\User_LDAP\User_Proxy"</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="samba"><a class="anchor" href="#samba"></a>Samba</h4>
<div class="literalblock">
<div class="content">
<pre>sudo -u www-data ./occ user:sync "OCA\User\SMB" -vvv</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="shibboleth"><a class="anchor" href="#shibboleth"></a>Shibboleth</h4>
<div class="literalblock">
<div class="content">
<pre>sudo -u www-data ./occ user:sync "OCA\User_Shibboleth\UserBackend"</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="syncing-via-cron-job"><a class="anchor" href="#syncing-via-cron-job"></a>Syncing via cron job</h4>
<div class="paragraph">
<p>Here is an example for syncing with LDAP four times a day on Ubuntu:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>crontab -e -u www-data

* */6 * * * /usr/bin/php /var/www/owncloud/occ user:sync -vvv --missing-account-action="disable" -n "OCA\User_LDAP\User_Proxy"</pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="versions"><a class="anchor" href="#versions"></a>Versions</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sourceCode hljs" data-lang="sourceCode">versions
 versions:cleanup   Delete versions
 versions:expire    Expires the users file versions</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>versions:cleanup</code> can delete all versioned files, as well as the
<code>files_versions</code> folder, for either specific users, or for all users.
The example below deletes all versioned files for all users:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>sudo -u www-data php occ versions:cleanup
Delete all versions
Delete versions for users on backend Database
  freda
  molly
  stash
  rosa
  edward</pre>
</div>
</div>
<div class="paragraph">
<p>You can delete versions for specific users in a space-delimited list:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>sudo -u www-data php occ versions:cleanup freda molly
Delete versions of   freda
Delete versions of   molly</pre>
</div>
</div>
<div class="paragraph">
<p><code>versions:expire</code> deletes only expired files according to the
<code>versions_retention_obligation</code> setting in <code>config.php</code> (see the File
versions section in config_sample_php_parameters). The default is to
delete expired files for all users, or you may list users in a
space-delimited list.</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>These commands are only available when the &#8220;Versions&#8221; app
(<code>files_versions</code>) is enabled. These commands are not available in
single-user (maintenance) mode &lt;maintenance_commands_label&gt;.</p>
</div>
</blockquote>
</div>
</div>
</div>
<div class="sect1">
<h2 id="command-line-installation"><a class="anchor" href="#command-line-installation"></a>Command Line Installation</h2>
<div class="sectionbody">
<div class="paragraph">
<p>ownCloud can be installed entirely from the command line. After
downloading the tarball and copying ownCloud into the appropriate
directories, or after installing ownCloud packages (See
../../installation/linux_installation and
../../installation/source_installation) you can use <code>occ</code> commands in
place of running the graphical Installation Wizard.</p>
</div>
<div class="paragraph">
<p>These instructions assume that you have a fully working and configured
webserver. If not, please refer to the documentation on
configuring the Apache web server &lt;apache_configuration_label&gt; for
detailed instructions.</p>
</div>
<div class="paragraph">
<p>Apply correct permissions to your ownCloud directories; see
strong_perms_label. Then choose your <code>occ</code> options. This lists your
available options:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>sudo -u www-data php occ
ownCloud is not installed - only a limited number of commands are available
ownCloud version 10.0.8

Usage:
 [options] command [arguments]

Options:
 --help (-h)           Display this help message
 --quiet (-q)          Do not output any message
 --verbose (-v|vv|vvv) Increase the verbosity of messages: 1 for normal output,
                       2 for more verbose output and 3 for debug
 --version (-V)        Display this application version
 --ansi                Force ANSI output
 --no-ansi             Disable ANSI output
 --no-interaction (-n) Do not ask any interactive question

Available commands:
 check                 Check dependencies of the server environment
 help                  Displays help for a command
 list                  Lists commands
 status                Show some status information
 app
  app:check-code       Check code to be compliant
 l10n
  l10n:createjs        Create javascript translation files for a given app
 maintenance
  maintenance:install  Install ownCloud</pre>
</div>
</div>
<div class="paragraph">
<p>Display your <code>maintenance:install</code> options</p>
</div>
<div class="literalblock">
<div class="content">
<pre>sudo -u www-data php occ help maintenance:install
ownCloud is not installed - only a limited number of commands are available
Usage:</pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sourceCode hljs" data-lang="sourceCode">maintenance:install [--database="..."] [--database-name="..."]</code></pre>
</div>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>[–database-host=&#8220;…&#8221;] [–database-user=&#8220;…&#8221;] [–database-pass[=&#8220;…&#8221;]]
[–database-table-prefix[=&#8220;…&#8221;]] [–admin-user=&#8220;…&#8221;] [–admin-pass=&#8220;…&#8221;]
[–data-dir=&#8220;…&#8221;]</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Options</dt>
<dd>
<p>–database Supported database type (default: &#8220;sqlite&#8221;) –database-name
Name of the database –database-host Hostname of the database (default:
&#8220;localhost&#8221;) –database-user User name to connect to the database
–database-pass Password of the database user –database-table-prefix
Prefix for all tables (default: <a href="">oc</a>) –admin-user User name of
the admin account (default: &#8220;admin&#8221;) –admin-pass Password of the
admin account –data-dir Path to data directory (default:
&#8220;/var/www/owncloud/data&#8221;) –help (-h) Display this help message
–quiet (-q) Do not output any message –verbose (-vvvv) Increase the
verbosity of messages: 1 for normal output, 2 for more verbose output
and 3 for debug –version (-V) Display this application version –ansi
Force ANSI output –no-ansi Disable ANSI output –no-interaction (-n) Do
not ask any interactive question</p>
</dd>
</dl>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>This example completes the installation:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>cd /var/www/owncloud/
sudo -u www-data php occ maintenance:install --database
"mysql" --database-name "owncloud"  --database-user "root" --database-pass
"password" --admin-user "admin" --admin-pass "password"
ownCloud is not installed - only a limited number of commands are available
ownCloud was successfully installed</pre>
</div>
</div>
<div class="paragraph">
<p>Supported databases are:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>- sqlite (SQLite3 - ownCloud Community edition only)
- mysql (MySQL/MariaDB)
- pgsql (PostgreSQL)
- oci (Oracle - ownCloud Enterprise edition only)</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="command-line-upgrade"><a class="anchor" href="#command-line-upgrade"></a>Command Line Upgrade</h2>
<div class="sectionbody">
<div class="paragraph">
<p>These commands are available only after you have downloaded upgraded
packages or tar archives, and before you complete the upgrade. List all
options, like this example on CentOS Linux:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>sudo -u www-data php occ upgrade -h
Usage:</pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sourceCode hljs" data-lang="sourceCode">upgrade [options]</code></pre>
</div>
</div>
<div class="quoteblock">
<blockquote>
<div class="dlist">
<dl>
<dt class="hdlist1">Options</dt>
<dd>
<p>–no-app-disable Skips the disable of third party apps</p>
<div class="dlist">
<dl>
<dt class="hdlist1">-h, –help Display this help message</dt>
<dd>
<p>-q, –quiet Do not output any message -V, –version Display this
application version –ansi Force ANSI output –no-ansi Disable ANSI
output -n, –no-interaction Do not ask any interactive question
–no-warnings Skip global warnings, show command output only -vvvv,
–verbose Increase the verbosity of messages: 1 for normal output, 2
for more verbose output and 3 for debug</p>
</dd>
</dl>
</div>
</dd>
<dt class="hdlist1">Help</dt>
<dd>
<p>run upgrade routines after installation of a new release. The release
has to be installed before.</p>
</dd>
</dl>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>When you are performing an update or upgrade on your ownCloud server
(see the Maintenance section of this manual), it is better to use <code>occ</code>
to perform the database upgrade step, rather than the Web GUI, in order
to avoid timeouts. PHP scripts invoked from the Web interface are
limited to 3600 seconds. In larger environments this may not be enough,
leaving the system in an inconsistent state. After performing all the
preliminary steps (see ../../maintenance/upgrade) use this command to
upgrade your databases, like this example on CentOS Linux:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>sudo -u www-data php occ upgrade
ownCloud or one of the apps require upgrade - only a limited number of
commands are available
Turned on maintenance mode
Checked database schema update
Checked database schema update for apps
Updated database
Updating &lt;gallery&gt; ...
Updated &lt;gallery&gt; to 0.6.1
Updating &lt;activity&gt; ...
Updated &lt;activity&gt; to 2.1.0
Update successful
Turned off maintenance mode</pre>
</div>
</div>
<div class="paragraph">
<p>Note how it details the steps. Enabling verbosity displays timestamps:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>sudo -u www-data php occ upgrade -v
ownCloud or one of the apps require upgrade - only a limited number of commands are available
2017-06-23T09:06:15+0000 Turned on maintenance mode
2017-06-23T09:06:15+0000 Checked database schema update
2017-06-23T09:06:15+0000 Checked database schema update for apps
2017-06-23T09:06:15+0000 Updated database
2017-06-23T09:06:15+0000 Updated &lt;files_sharing&gt; to 0.6.6
2017-06-23T09:06:15+0000 Update successful
2017-06-23T09:06:15+0000 Turned off maintenance mode</pre>
</div>
</div>
<div class="paragraph">
<p>If there is an error it throws an exception, and the error is detailed
in your ownCloud logfile, so you can use the log output to figure out
what went wrong, or to use in a bug report.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>Turned on maintenance mode
Checked database schema update
Checked database schema update for apps
Updated database
Updating &lt;files_sharing&gt; ...
Exception
ServerNotAvailableException: LDAP server is not available
Update failed
Turned off maintenance mode</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="two-factor-authentication"><a class="anchor" href="#two-factor-authentication"></a>Two-factor Authentication</h2>
<div class="sectionbody">
<div class="paragraph">
<p>If a two-factor provider app is enabled, it is enabled for all users by
default (though the provider can decide whether or not the user has to
pass the challenge). In the case of an user losing access to the second
factor (e.g., a lost phone with two-factor SMS verification), the admin
can temporarily disable the two-factor check for that user via the occ
command:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>sudo -u www-data php occ twofactor:disable &lt;username&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>To re-enable two-factor authentication again, use the following
commmand:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>sudo -u www-data php occ twofactor:enable &lt;username&gt;</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="disable-users"><a class="anchor" href="#disable-users"></a>Disable Users</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Admins can disable users via the occ command too:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>sudo -u www-data php occ user:disable &lt;username&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>Use the following command to enable the user again:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>sudo -u www-data php occ user:enable &lt;username&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>Once users are disabled, their connected browsers will be disconnected.</p>
</div>
<div class="sect2">
<h3 id="finding-inactive-users"><a class="anchor" href="#finding-inactive-users"></a>Finding Inactive Users</h3>
<div class="paragraph">
<p>To view a list of users who’ve not logged in for a given number of days,
use the <code>user:inactive</code> command The example below searches for users
inactive for five days, or more.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>sudo -u www-data php occ user:inactive 5</pre>
</div>
</div>
<div class="paragraph">
<p>Options</p>
</div>
<div class="literalblock">
<div class="content">
<pre>--output[=OUTPUT] Output format (plain, json or json_pretty, default is plain) [default: "plain"]</pre>
</div>
</div>
<div class="paragraph">
<p>By default, this will generate output in the following format:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>- 0:
  - uid: admin
  - displayName: admin
  - inactiveSinceDays: 5</pre>
</div>
</div>
<div class="paragraph">
<p>You can see the user’s user id, display name, and the number of days
they’ve been inactive. If you’re passing or piping this information to
another application for further processing, you can also use the
<code>--output</code> switch to change its format.</p>
</div>
<div class="paragraph">
<p>Using the output option <code>json</code> will render the output formatted as
follows.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sourceCode hljs" data-lang="sourceCode">[{"uid":"admin","displayName":"admin","inactiveSinceDays":5}]</code></pre>
</div>
</div>
<div class="paragraph">
<p>Using the output option <code>json_pretty</code> will render the output formatted
as follows.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sourceCode hljs" data-lang="sourceCode">[
    {
        "uid": "admin",
        "displayName": "admin",
        "inactiveSinceDays": 5
    }
]</code></pre>
</div>
</div>
</div>
</div>
</div>
</article>
  </main>
</div>
<footer class="footer">
  <p>This page was built using the Antora default UI.</p>
  <p>The source code for this UI is licensed under the terms of the MPL-2.0 license.</p>
</footer>
<script src="../../../owncloud-docs/js/site.js"></script>
<script src="../../../owncloud-docs/js/vendor/highlight.js"></script>
<script>hljs.initHighlighting()</script>
  </body>
</html>
