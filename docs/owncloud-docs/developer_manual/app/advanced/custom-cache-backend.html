<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Custom Filesystem Caches :: ownCloud Documentation</title>
    <link rel="stylesheet" href="../../../../owncloud-docs/css/site.css">
  </head>
  <body class="article">
<header class="header" role="banner">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="../../../..">ownCloud Documentation</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="#">Home</a>
        <a class="navbar-item" href="https://owncloud.org/news/">News</a>
        <a class="navbar-item" href="https://owncloud.org/features/">Features</a>
        <a class="navbar-item" href="https://demo.owncloud.org/">Demo</a>
        <a class="navbar-item" href="#">Documentation</a>
        <a class="navbar-item" href="https://owncloud.org/contribute/">Contribute</a>
        <a class="navbar-item" href="https://owncloud.org/support">Support</a>
        <a class="navbar-item" href="https://owncloud.com/">Enterprise Edition</a>
        <!--<div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Products</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Product A</a>
            <a class="navbar-item" href="#">Product B</a>
            <a class="navbar-item" href="#">Product C</a>
          </div>
        </div>-->
        <div class="navbar-item">
          <span class="control">
            <a class="button is-primary" href="https://owncloud.org/install/">Download</a>
          </span>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="main-wrapper">
<div class="navigation-container" data-component="owncloud-docs" data-version="master">
  <aside class="navigation" role="navigation">
    <div class="panels">
<div class="navigation-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../../../index.html">ownCloud // Documentation</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-toggle"></button>
    <span class="nav-text">ROOT</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <span class="nav-text">Appliance</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <button class="nav-toggle"></button>
    <span class="nav-text">Ucs</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../appliance/ucs/add-groups-and-users.html">Add groups and users</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../appliance/Active_Directory.html">Active Directory</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../appliance/Backup.html">Backup</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../appliance/Clamav.html">ClamAV</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../appliance/Office.html">Office</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../appliance/certificates.html">Certificates</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../appliance/howto-update-owncloud.html">Howto update ownCloud</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../appliance/index.html">Index</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../appliance/installation.html">Installation</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../appliance/login_information.html">Login Information</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../appliance/managing-ucs.html">Managing UCS</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../appliance/what-is-it.html">What is it</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <span class="nav-text">Configuration</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <button class="nav-toggle"></button>
    <span class="nav-text">Database</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../configuration/database/db_conversion.html">DB Conversion</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../configuration/database/index.html">Index</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../configuration/database/linux_database_configuration.html">Linux Database Configuration</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-toggle"></button>
    <span class="nav-text">Files</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../configuration/files/external_storage/amazons3.html">AmazonS3</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../configuration/files/big_file_upload_configuration.html">Big File Upload Configuration</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../configuration/files/default_files_configuration.html">Default Files Configuration</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../configuration/files/encryption_configuration.html">Encryption Configuration</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../configuration/files/external_storage_configuration.html">External Storage Configuration</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../configuration/files/external_storage_configuration_gui.html">External Storage Configuration GUI</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../configuration/files/federated_cloud_sharing_configuration.html">Federated Cloud Sharing Configuration</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../configuration/files/file_sharing_configuration.html">File Sharing Configuration</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../configuration/files/file_versioning.html">File Versioning</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../configuration/files/files_locking_transactional.html">Files LOCking Transactional</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../configuration/files/index.html">Index</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../configuration/files/previews_configuration.html">Previews Configuration</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../configuration/files/trashbin_options.html">Trashbin Options</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-toggle"></button>
    <span class="nav-text">Ldap</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../configuration/ldap/ldap_proxy_cache_server_setup.html">LDAP Proxy Cache Server Setup</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-toggle"></button>
    <span class="nav-text">Mimetypes</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../configuration/mimetypes/index.html">Index</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-toggle"></button>
    <span class="nav-text">Server</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../configuration/server/security/password-policy.html">Password policy</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../configuration/server/activity_configuration.html">Activity Configuration</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../configuration/server/antivirus_configuration.html">AntiVirus Configuration</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../configuration/server/automatic_configuration.html">Automatic Configuration</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../configuration/server/background_jobs_configuration.html">Background Jobs Configuration</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../configuration/server/caching_configuration.html">Caching Configuration</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../configuration/server/config_sample_php_parameters.html">Config Sample PHP Parameters</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../configuration/server/custom_client_repos.html">Custom Client Repos</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../configuration/server/email_configuration.html">Email Configuration</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../configuration/server/excluded_blacklisted_files.html">Excluded Blacklisted Files</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../configuration/server/external_sites.html">External Sites</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../configuration/server/harden_server.html">Harden Server</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../configuration/server/import_ssl_cert.html">Import SSL Cert</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../configuration/server/index.html">Index</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../configuration/server/index_php_less_urls.html">Index PHP Less URLs</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../configuration/server/knowledgebase_configuration.html">Knowledgebase Configuration</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../configuration/server/language_configuration.html">Language Configuration</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../configuration/server/logging_configuration.html">Logging Configuration</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../configuration/server/oc_server_tuning.html">OC Server Tuning</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../configuration/server/occ_command.html">OCC Command</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../configuration/server/reverse_proxy_configuration.html">Reverse Proxy Configuration</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../configuration/server/security_setup_warnings.html">Security Setup Warnings</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../configuration/server/thirdparty_php_configuration.html">Thirdparty PHP Configuration</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-toggle"></button>
    <span class="nav-text">User</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../configuration/user/index.html">Index</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../configuration/user/reset_admin_password.html">Reset Admin Password</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../configuration/user/reset_user_password.html">Reset User Password</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../configuration/user/user_auth_ftp_smb_imap.html">User Auth FTP SMB IMAP</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../configuration/user/user_auth_ldap.html">User Auth LDAP</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../configuration/user/user_configuration.html">User Configuration</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../configuration/user/user_provisioning_api.html">User Provisioning API</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../configuration/user/user_roles.html">User Roles</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../configuration/index.html">Index</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <span class="nav-text">Enterprise</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <button class="nav-toggle"></button>
    <span class="nav-text">Clients</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../enterprise/clients/creating_branded_apps.html">Creating Branded Apps</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../enterprise/clients/custom_client_repos.html">Custom Client Repos</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../enterprise/clients/index.html">Index</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-toggle"></button>
    <span class="nav-text">External_storage</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../enterprise/external_storage/enterprise_only_auth.html">Enterprise Only Auth</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../enterprise/external_storage/index.html">Index</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../enterprise/external_storage/ldap_home_connector_configuration.html">LDAP Home Connector Configuration</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../enterprise/external_storage/onedrive.html">OneDrive</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../enterprise/external_storage/s3_swift_as_primary_object_store_configuration.html">S3 Swift As Primary Object Store Configuration</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../enterprise/external_storage/sharepoint-integration_configuration.html">Sharepoint integration Configuration</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../enterprise/external_storage/windows-network-drive_configuration.html">Windows network drive Configuration</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-toggle"></button>
    <span class="nav-text">File_management</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../enterprise/file_management/files_tagging.html">Files Tagging</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../enterprise/file_management/index.html">Index</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-toggle"></button>
    <span class="nav-text">Firewall</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../enterprise/firewall/file_firewall.html">File Firewall</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../enterprise/firewall/index.html">Index</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-toggle"></button>
    <span class="nav-text">Installation</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../enterprise/installation/index.html">Index</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../enterprise/installation/install.html">Install</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../enterprise/installation/oracle_db_configuration.html">Oracle DB Configuration</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-toggle"></button>
    <span class="nav-text">Logging</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../enterprise/logging/enterprise_logging_apps.html">Enterprise Logging Apps</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../enterprise/logging/index.html">Index</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-toggle"></button>
    <span class="nav-text">Ransomware-protection</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../enterprise/ransomware-protection/index.html">Index</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-toggle"></button>
    <span class="nav-text">Server_branding</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../enterprise/server_branding/enterprise_server_branding.html">Enterprise Server Branding</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../enterprise/server_branding/index.html">Index</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-toggle"></button>
    <span class="nav-text">User_management</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../enterprise/user_management/index.html">Index</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../enterprise/user_management/user_auth_shibboleth.html">User Auth Shibboleth</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../enterprise/index.html">Index</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <span class="nav-text">Faq</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../faq/index.html">Index</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <span class="nav-text">Installation</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <button class="nav-toggle"></button>
    <span class="nav-text">Docker</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../installation/docker/index.html">Index</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-toggle"></button>
    <span class="nav-text">Letsencrypt</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../installation/letsencrypt/apache.html">Apache</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../installation/letsencrypt/index.html">Index</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../installation/letsencrypt/nginx.html">NGINX</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../installation/apps_management_installation.html">Apps Management Installation</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../installation/apps_supported.html">Apps Supported</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../installation/changing_the_web_route.html">Changing the Web Route</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../installation/command_line_installation.html">Command Line Installation</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../installation/configuration_notes_and_tips.html">Configuration Notes and Tips</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../installation/deployment_considerations.html">Deployment Considerations</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../installation/deployment_recommendations.html">Deployment Recommendations</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../installation/index.html">Index</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../installation/installation_wizard.html">Installation Wizard</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../installation/linux_installation.html">Linux Installation</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../installation/nginx_configuration.html">NGINX Configuration</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../installation/selinux_configuration.html">SELinux Configuration</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../installation/source_installation.html">Source Installation</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../installation/system_requirements.html">System ReqUIrements</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../installation/troubleshooting.html">Troubleshooting</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <span class="nav-text">Issues</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../issues/code_signing.html">Code Signing</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../issues/general_troubleshooting.html">General Troubleshooting</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../issues/impersonate_users.html">Impersonate Users</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../issues/index.html">Index</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <span class="nav-text">Maintenance</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../maintenance/backup.html">Backup</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../maintenance/enable_maintenance.html">Enable Maintenance</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../maintenance/index.html">Index</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../maintenance/manual_upgrade.html">Manual Upgrade</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../maintenance/manually-moving-data-folders.html">Manually moving data folders</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../maintenance/migrating.html">Migrating</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../maintenance/package_upgrade.html">Package Upgrade</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../maintenance/restore.html">Restore</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../maintenance/update.html">Update</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../maintenance/upgrade.html">Upgrade</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <span class="nav-text">Upgrading</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../upgrading/index.html">Index</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../upgrading/marketplace_apps.html">Marketplace Apps</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../upgrading/upgrade_php.html">Upgrade PHP</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../contents.html">Contents</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../index.html">Index</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../release_notes.html">Release Notes</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../whats_new_admin.html">Whats New Admin</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-toggle"></button>
    <span class="nav-text">user manual</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <span class="nav-text">External_storage</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../user_manual/external_storage/external_storage.html">External Storage</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../user_manual/external_storage/index.html">Index</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../user_manual/external_storage/sharepoint_connecting.html">Sharepoint Connecting</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <span class="nav-text">Files</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <button class="nav-toggle"></button>
    <span class="nav-text">Webgui</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../user_manual/files/webgui/comments.html">Comments</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../user_manual/files/webgui/custom_groups.html">Custom Groups</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../user_manual/files/webgui/index.html">Index</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../user_manual/files/webgui/navigating.html">Navigating</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../user_manual/files/webgui/overview.html">Overview</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../user_manual/files/webgui/quota.html">Quota</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../user_manual/files/webgui/sharing.html">Sharing</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../user_manual/files/webgui/tagging.html">Tagging</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../user_manual/files/access_webdav.html">Access Webdav</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../user_manual/files/deleted_file_management.html">Deleted File Management</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../user_manual/files/desktop_mobile_sync.html">Desktop Mobile Sync</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../user_manual/files/encrypting_files.html">Encrypting Files</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../user_manual/files/federated_cloud_sharing.html">Federated Cloud Sharing</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../user_manual/files/gallery_app.html">Gallery App</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../user_manual/files/index.html">Index</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../user_manual/files/large_file_upload.html">Large File Upload</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../user_manual/files/public_link_shares.html">Public Link Shares</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../user_manual/files/troubleshooting.html">Troubleshooting</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../user_manual/files/version_control.html">Version Control</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <span class="nav-text">Pim</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../user_manual/pim/calendar.html">Calendar</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../user_manual/pim/contacts.html">Contacts</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../user_manual/pim/index.html">Index</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../user_manual/pim/sync_ios.html">Sync Ios</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../user_manual/pim/sync_kde.html">Sync Kde</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../user_manual/pim/sync_osx.html">Sync Osx</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../user_manual/pim/sync_thunderbird.html">Sync Thunderbird</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../user_manual/pim/troubleshooting.html">Troubleshooting</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../user_manual/contents.html">Contents</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../user_manual/index.html">Index</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../user_manual/session_management.html">Session Management</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../user_manual/troubleshooting.html">Troubleshooting</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../user_manual/userpreferences.html">Userpreferences</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../user_manual/webinterface.html">Webinterface</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../user_manual/whats_new.html">Whats New</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-toggle"></button>
    <span class="nav-text">developer manual</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <span class="nav-text">App</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <button class="nav-toggle"></button>
    <span class="nav-text">Advanced</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="code_signing.html">Code Signing</a>
  </li>
  <li class="nav-item is-current-page" data-depth="4">
    <a class="nav-link" href="custom-cache-backend.html">Custom cache backend</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="custom-storage-backend.html">Custom storage backend</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="extstorage.html">Extstorage</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="index.html">Index</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="l10n.html">L10N</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="storage-backend.html">Storage backend</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="two-factor-provider.html">Two factor provider</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="users.html">Users</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-toggle"></button>
    <span class="nav-text">Fundamentals</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../fundamentals/api.html">API</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../fundamentals/backgroundjobs.html">Backgroundjobs</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../fundamentals/changelog.html">Changelog</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../fundamentals/classloader.html">ClaSSLoader</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../fundamentals/configuration.html">Configuration</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../fundamentals/container.html">Container</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../fundamentals/controllers.html">Controllers</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../fundamentals/css.html">CSS</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../fundamentals/database.html">Database</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../fundamentals/filesystem.html">Filesystem</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../fundamentals/hooks.html">Hooks</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../fundamentals/index.html">Index</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../fundamentals/info.html">Info</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../fundamentals/js.html">JS</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../fundamentals/logging.html">Logging</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../fundamentals/market_app.html">Market App</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../fundamentals/middleware.html">Middleware</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../fundamentals/publishing.html">Publishing</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../fundamentals/routes.html">Routes</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../fundamentals/templates.html">Templates</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../fundamentals/testing.html">Testing</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-toggle"></button>
    <span class="nav-text">Tutorial</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../tutorial/database_connectivity.html">Database Connectivity</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../tutorial/development_environment.html">Development Environment</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../tutorial/finishing_touches.html">Finishing Touches</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../tutorial/index.html">Index</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../tutorial/javascript_and_css.html">JavaScript and CSS</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../tutorial/navigation.html">Navigation</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../tutorial/request.html">Request</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../tutorial/requirements.html">ReqUIrements</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../tutorial/restful_api.html">Restful API</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../tutorial/routes_and_controllers.html">Routes and Controllers</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../tutorial/template_content.html">Template Content</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../tutorial/testing.html">Testing</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../tutorial/wiring_it_up.html">Wiring it Up</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../index.html">Index</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../introduction.html">Introduction</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <span class="nav-text">Bugtracker</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../bugtracker/codereviews.html">Codereviews</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../bugtracker/index.html">Index</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../bugtracker/triaging.html">Triaging</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <span class="nav-text">Commun</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../commun/help_and_communication.html">Help and Communication</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../commun/index.html">Index</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <span class="nav-text">Core</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../core/acceptance-tests.html">Acceptance tests</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../core/configfile.html">Configfile</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../core/externalapi.html">ExternalAPI</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../core/index.html">Index</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../core/introduction.html">Introduction</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../core/ocs-capabilities.html">OCS capabilities</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../core/ocs-recipient-api.html">OCS recipient API</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../core/ocs-share-api.html">OCS share API</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../core/theming.html">Theming</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../core/translation.html">Translation</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../core/ui-testing.html">UI testing</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../core/unit-testing.html">Unit testing</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <span class="nav-text">General</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../general/backporting.html">Backporting</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../general/code-of-conduct.html">Code of conduct</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../general/codingguidelines.html">CodingGUIdelines</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../general/debugging.html">Debugging</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../general/devenv.html">Devenv</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../general/index.html">Index</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../general/performance.html">Performance</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../general/security.html">Security</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <span class="nav-text">Mobile_development</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <button class="nav-toggle"></button>
    <span class="nav-text">Android_library</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../mobile_development/android_library/examples.html">Examples</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../mobile_development/android_library/index.html">Index</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../mobile_development/android_library/library_installation.html">Library Installation</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-toggle"></button>
    <span class="nav-text">Ios_library</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../mobile_development/ios_library/examples.html">Examples</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../mobile_development/ios_library/index.html">Index</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../mobile_development/ios_library/library_installation.html">Library Installation</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../mobile_development/index.html">Index</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <span class="nav-text">Testing</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../testing/index.html">Index</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <span class="nav-text">Webdav_api</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../webdav_api/comments.html">Comments</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../webdav_api/files_versions.html">Files Versions</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../webdav_api/index.html">Index</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../webdav_api/tags.html">Tags</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../index.html">Index</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="navigation-explore" data-panel="explore">
  <div class="context">
    <span class="title">ownCloud // Documentation</span>
    <span class="version">master</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <span class="title">ownCloud // Documentation</span>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../../../index.html">master</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
  <main class="main" role="main">
<div class="toolbar" role="navigation">
  <button class="navigation-toggle"></button>
<nav class="crumbs" role="navigation" aria-label="breadcrumbs">
  <ul>
    <li class="crumb"><a href="../../../index.html">ownCloud // Documentation</a></li>
    <li class="crumb">developer manual</li>
    <li class="crumb">App</li>
    <li class="crumb">Advanced</li>
    <li class="crumb"><a href="custom-cache-backend.html">Custom cache backend</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="file:///Users/settermjd/Workspace/clients/ownCloud/documentation/admin_manual/modules/developer_manual/pages/app/advanced/custom-cache-backend.adoc">Edit this Page</a></div>
</div>
<article class="doc">
<h1>Custom Filesystem Caches</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>The metadata cache in ownCloud can be overridden by a storage class
backend which implements the following methods:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 47%;">
<col style="width: 53%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Method</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>getCache($path = `, $storage = null)</code>
<code>getScanner($path = `, $storage = null)</code>
<code>getWatcher($path = `, $storage = null)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">For overwriting the cache
itself. For overwriting the meta data scanning behavior. For overwriting
the behavior of checking for external changes.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>It’s unlikely that an app will need to override any of the three
systems; as long as a storage backend behaves accordingly, the cache
systems will work on any storage backend.</p>
</div>
<div class="paragraph">
<p>But, here are some cases where it may be practical to do so:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Overriding the cache:</strong> This may be helpful in the case of shared
storage. In this case, the overriding class should redirect any cache
operation to the cache of the user that owns the share.</p>
</li>
<li>
<p><strong>Overriding the scanner:</strong> This is useful in cases where it would
provide an efficient way to retrieve the metadata of a significant
number of files and folders. In doing so it avoids the need to perform a
large number of round-trip requests.</p>
</li>
<li>
<p><strong>Overriding the watcher:</strong> This could be useful for changing the
behavior for detecting changes made to a storage from outside ownCloud.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>However — in almost all cases — overriding the <code>hasUpdated()</code> method of
a storage provides sufficient flexibility.</p>
</div>
<div class="paragraph">
<p>If any of these three systems need to be overridden, one of the
following classes should be sub-classed:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>\OC\Files\Cache\Cache</code></p>
</li>
<li>
<p><code>\OC\Files\Cache\Scanner</code></p>
</li>
<li>
<p><code>\OC\Files\Cache\Watcher</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This class should then return the subclass from one of
the three methods listed above &lt;storage-backend-methods&gt;.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cache"><a class="anchor" href="#cache"></a>Cache</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Instead of creating a full, custom, cache object, you can also use the
same wrapper pattern as when
creating custom storage backends &lt;custom-storage-backends&gt;. Cache
wrappers should be implemented by overriding the <code>getCache()</code> method. In
addition, it may also be useful to override the following methods:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 43%;">
<col style="width: 57%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Method</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>get($file)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Returns either the cache entry &lt;label-cache-entry&gt; for a
file or folder or false if the file is not in the cache.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>getFolderContents($path)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Returns the cache entries for all files and
folders in a folder or an empty array if the folder is not in the cache.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>getFolderContentsById($id)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Same as <code>getFolderContents()</code>, but it
uses a file id instead of a path.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>put($file, $data)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Saves a cache entry for a file. If the file is
already in the cache then <code>update()</code> is called automatically.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>update($id, $data)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Updates an existing cache entry. Only the changed
values need to be provided in <code>$data</code>, any omitted values will remain
unchanged.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>getId($path)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Retrieves the file id for a file or folder. A file id
is a numeric id for a file or folder that’s unique within an ownCloud
instance which stays the same for the lifetime of a file even through
renaming.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>getParentId($path)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Retrieves the file id of the parent folder or
<code>=1</code> if the file has no parent, root, entry.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>inCache($file)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Checks if a file is in the cache.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>remove($file)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Removes a file or folder from the cache. In the case
of removing a folder, it should remove all child entries as well.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>move($source, $target)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Renames a file or folder in the cache. In the
case of moving a folder, it should also move all child entries.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>moveFromCache($sourceCache, $sourcePath, $targetPath)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Moves a file
or folder from a cache instance to a local path.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>clear()</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Removes all entries from the cache.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>getStatus($file)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Retrieves the scanned status of a file or folder.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>search($pattern)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Searches the cache for a file or folder where the
filename matches <code>$pattern</code>. SQL style wildcards are used in the
pattern.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>searchByMime($mimetype)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Searches for a file or folder with a
matching mimetype. Both full mimetypes (&#8216;text/plain&#8217;) and mimetype
groups (&#8216;text&#8217;) should be supported as search option.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>correctFolderSize($path)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Recalculates the size of a folder and all
parent folders.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>calculateFolderSize($path)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Recalculates the size of a single folder.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>getAll()</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Retrieves the file id for all files and folder in the cache</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>getIncomplete()</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Retrieve folders which have a status of
<code>Cache::SHALLOW</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>getPathById($id)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Retrieve the path of a file or folder whose file id
matches <code>$id</code>. Returns null if a match is not found.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">static <code>getById($id)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Retrieves the path and storage id for a file
whose file id matches <code>$id</code>. This is deprecated in favor of
<code>getPathById()</code>.</p></td>
</tr>
</tbody>
</table>
<div class="sect2">
<h3 id="cache-entries"><a class="anchor" href="#cache-entries"></a>Cache Entries</h3>
<div class="paragraph">
<p>A cache entry is an associative array that should contain, at least, the
following values:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 18%;">
<col style="width: 8%;">
<col style="width: 74%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Method</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>fileid</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">int</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The numeric id of a file (see <code>getId()</code>, above).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>storage</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">int</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The numeric id of the storage the file is stored on.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>path</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The path of the file within the storage (e.g.,
&#8216;foo/bar.txt&#8217;).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The basename of a file or folder (’bar.txt).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mimetype</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The full mimetype of the file (e.g., &#8216;text/plain&#8217;).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mimepart</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The mimetype group (e.g., &#8216;text&#8217;).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>size</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">int</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The size of the file or folder in bytes.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mtime</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">int</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The last modified date of the file as a UNIX timestamp as
shown in the UI.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>storage_mtime</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">int</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The last modified date of the file as a UNIX
timestamp as stored on the storage.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Note that when a file is updated ownCloud also updates the modification
time of <strong>all</strong> parent folders. Doing so makes it visible to the user
exactly which folder has most recently been updated. However, ownCloud’s
modification time can differ from the mtime value on the underlying
storage. But, this usually only changes when a direct child is added,
removed, or renamed.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 18%;">
<col style="width: 8%;">
<col style="width: 74%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Method</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>etag</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An Etag is used to detect changes to files and folders.
An Etag of a <em>file</em> changes whenever the content of the file changes. An
Etag of a <em>folder</em> changes whenever a file <em>in</em> the folder has changed.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>permissions</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">int</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The permissions for the file. These are stored as a
bitwise combination of <code>\OCP\PERMISSION_READ</code>, <code>\OCP\PERMISSION_CREATE</code>,
<code>\OCP\PERMISSION_UPDATE</code>, <code>\OCP\PERMISSION_DELETE</code>, and
<code>\OCP\PERMISSION_SHARE</code>.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cachewrappers"><a class="anchor" href="#cachewrappers"></a>CacheWrappers</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Just like storage wrappers, cache wrappers can be used to change the
behavior of an existing cache. ownCloud comes with two cache wrappers
which can be useful for applications; these are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>\OC\Files\Cache\Wrapper\CacheJail</code></p>
</li>
<li>
<p><code>\OC\Files\Cache\Wrapper\CachePermissionsMask</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>These serve the same purpose as the two similarly named storage
wrappers. Implementing a cache wrapper can be done by sub-classing
<code>\OC\Files\Cache\CacheWrapper</code>. Inside this class, the wrapped cache
will be available as <code>$this-&gt;cache</code>.</p>
</div>
<div class="paragraph">
<p>Besides providing the options to override any method of the wrapped
cache, the cache wrapper also provides the convenience method
<code>formatCacheEntry($entry)</code>. This can be overridden to allow for easier
changes to any method that returns cache entries.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="scanner"><a class="anchor" href="#scanner"></a>Scanner</h2>
<div class="sectionbody">
<div class="paragraph">
<p>It might be useful to override the following methods of the scanner:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Method</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>getData($path)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Retrieves all metadata of a path to put in the cache.
It returns an array which should contain the following keys: <code>mimetype</code>,
<code>mtime</code>, <code>size</code>, <code>etag</code>,
<code>storage_mtime\</code>, and`permissions`.<code>size`should always being</code>-1`` for
folders.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>scanFile($file)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Scans a single file, or scans a folder by passing
<code>self::SCAN_RECURSIVE</code> (or true) as the second parameter. When scanning
folders, the scanner should recurse into any sub-directory and the size
of any folder should be calculated correctly. If not, the scanner should
only scan the direct children of the folder. Any folder that’s not fully
scanned should have it’s size set to <code>-1</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>backgroundScan()</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Should do a recursive scan on all folders which
have not previously been fully scanned. The size should be set to <code>-1</code>.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="watcher"><a class="anchor" href="#watcher"></a>Watcher</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The watcher is responsible for checking for outside changes made to the
filesystem and updating the cache accordingly. As noted above, in most
cases overriding the <code>hasUpdated()</code> method of a storage backend
sub-class is sufficient. However, the following methods could be
overridden, if necessary:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 22%;">
<col style="width: 78%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Method</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>checkUpdate($path)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Checks if a file or folder has been changed
externally. If so it updates the cache and return <code>true</code>, else return
<code>false</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>cleanFolder($path)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Checks a folder for any child entries that are no
longer in the storage. This should be called automatically by
<code>checkUpdate()</code> if that method detects an update.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>An app or admin can also change the watcher behavior by setting it’s
policy by calling <code>setPolicy($policy)</code>. This method can take the
following values:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 27%;">
<col style="width: 73%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Method</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Watcher::CHECK_NEVER</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Don’t check for any external change. This is
recommended if you’re certain that no outside changes will be made.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Watcher::CHECK_ONCE</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Check each path for updates at most once during
a request (default).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Watcher::CHECK_ALWAYS</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Check for external changes any number of times
during a request. It is mostly useful for unit tests.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="updater"><a class="anchor" href="#updater"></a>Updater</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Another cache related system, which developers should be aware of when
working with custom caches, is the updater. The updater
(<code>\OC\Files\Cache\Updater</code>) is responsible for updating the cache when
any change is made from inside ownCloud. It will call either the scanner
or the cache of a storage to make the required changes. The updater <strong>can
not</strong> be overwritten by storage backends.</p>
</div>
</div>
</div>
</article>
  </main>
</div>
<footer class="footer">
  <p>This page was built using the Antora default UI.</p>
  <p>The source code for this UI is licensed under the terms of the MPL-2.0 license.</p>
</footer>
<script src="../../../../owncloud-docs/js/site.js"></script>
<script src="../../../../owncloud-docs/js/vendor/highlight.js"></script>
<script>hljs.initHighlighting()</script>
  </body>
</html>
