<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NGINX Configuration :: ownCloud Documentation</title>
    <link rel="stylesheet" href="../../owncloud-docs/css/site.css">
  </head>
  <body class="article">
<header class="header" role="banner">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="../..">ownCloud Documentation</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="#">Home</a>
        <a class="navbar-item" href="https://owncloud.org/news/">News</a>
        <a class="navbar-item" href="https://owncloud.org/features/">Features</a>
        <a class="navbar-item" href="https://demo.owncloud.org/">Demo</a>
        <a class="navbar-item" href="#">Documentation</a>
        <a class="navbar-item" href="https://owncloud.org/contribute/">Contribute</a>
        <a class="navbar-item" href="https://owncloud.org/support">Support</a>
        <a class="navbar-item" href="https://owncloud.com/">Enterprise Edition</a>
        <!--<div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Products</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Product A</a>
            <a class="navbar-item" href="#">Product B</a>
            <a class="navbar-item" href="#">Product C</a>
          </div>
        </div>-->
        <div class="navbar-item">
          <span class="control">
            <a class="button is-primary" href="https://owncloud.org/install/">Download</a>
          </span>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="main-wrapper">
<div class="navigation-container" data-component="owncloud-docs" data-version="master">
  <aside class="navigation" role="navigation">
    <div class="panels">
<div class="navigation-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../index.html">ownCloud // Documentation</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-toggle"></button>
    <span class="nav-text">ROOT</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <span class="nav-text">Appliance</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <button class="nav-toggle"></button>
    <span class="nav-text">Ucs</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../appliance/ucs/add-groups-and-users.html">Add groups and users</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../appliance/Active_Directory.html">Active Directory</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../appliance/Backup.html">Backup</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../appliance/Clamav.html">ClamAV</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../appliance/Office.html">Office</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../appliance/certificates.html">Certificates</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../appliance/howto-update-owncloud.html">Howto update ownCloud</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../appliance/index.html">Index</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../appliance/installation.html">Installation</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../appliance/login_information.html">Login Information</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../appliance/managing-ucs.html">Managing UCS</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../appliance/what-is-it.html">What is it</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <span class="nav-text">Configuration</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <button class="nav-toggle"></button>
    <span class="nav-text">Database</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../configuration/database/db_conversion.html">DB Conversion</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../configuration/database/index.html">Index</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../configuration/database/linux_database_configuration.html">Linux Database Configuration</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-toggle"></button>
    <span class="nav-text">Files</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../configuration/files/external_storage/amazons3.html">AmazonS3</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../configuration/files/big_file_upload_configuration.html">Big File Upload Configuration</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../configuration/files/default_files_configuration.html">Default Files Configuration</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../configuration/files/encryption_configuration.html">Encryption Configuration</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../configuration/files/external_storage_configuration.html">External Storage Configuration</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../configuration/files/external_storage_configuration_gui.html">External Storage Configuration GUI</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../configuration/files/federated_cloud_sharing_configuration.html">Federated Cloud Sharing Configuration</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../configuration/files/file_sharing_configuration.html">File Sharing Configuration</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../configuration/files/file_versioning.html">File Versioning</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../configuration/files/files_locking_transactional.html">Files LOCking Transactional</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../configuration/files/index.html">Index</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../configuration/files/previews_configuration.html">Previews Configuration</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../configuration/files/trashbin_options.html">Trashbin Options</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-toggle"></button>
    <span class="nav-text">Ldap</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../configuration/ldap/ldap_proxy_cache_server_setup.html">LDAP Proxy Cache Server Setup</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-toggle"></button>
    <span class="nav-text">Mimetypes</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../configuration/mimetypes/index.html">Index</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-toggle"></button>
    <span class="nav-text">Server</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../configuration/server/security/password-policy.html">Password policy</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../configuration/server/activity_configuration.html">Activity Configuration</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../configuration/server/antivirus_configuration.html">AntiVirus Configuration</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../configuration/server/automatic_configuration.html">Automatic Configuration</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../configuration/server/background_jobs_configuration.html">Background Jobs Configuration</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../configuration/server/caching_configuration.html">Caching Configuration</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../configuration/server/config_sample_php_parameters.html">Config Sample PHP Parameters</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../configuration/server/custom_client_repos.html">Custom Client Repos</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../configuration/server/email_configuration.html">Email Configuration</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../configuration/server/excluded_blacklisted_files.html">Excluded Blacklisted Files</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../configuration/server/external_sites.html">External Sites</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../configuration/server/harden_server.html">Harden Server</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../configuration/server/import_ssl_cert.html">Import SSL Cert</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../configuration/server/index.html">Index</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../configuration/server/index_php_less_urls.html">Index PHP Less URLs</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../configuration/server/knowledgebase_configuration.html">Knowledgebase Configuration</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../configuration/server/language_configuration.html">Language Configuration</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../configuration/server/logging_configuration.html">Logging Configuration</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../configuration/server/oc_server_tuning.html">OC Server Tuning</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../configuration/server/occ_command.html">OCC Command</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../configuration/server/reverse_proxy_configuration.html">Reverse Proxy Configuration</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../configuration/server/security_setup_warnings.html">Security Setup Warnings</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../configuration/server/thirdparty_php_configuration.html">Thirdparty PHP Configuration</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-toggle"></button>
    <span class="nav-text">User</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../configuration/user/index.html">Index</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../configuration/user/reset_admin_password.html">Reset Admin Password</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../configuration/user/reset_user_password.html">Reset User Password</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../configuration/user/user_auth_ftp_smb_imap.html">User Auth FTP SMB IMAP</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../configuration/user/user_auth_ldap.html">User Auth LDAP</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../configuration/user/user_configuration.html">User Configuration</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../configuration/user/user_provisioning_api.html">User Provisioning API</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../configuration/user/user_roles.html">User Roles</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../configuration/index.html">Index</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <span class="nav-text">Enterprise</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <button class="nav-toggle"></button>
    <span class="nav-text">Clients</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../enterprise/clients/creating_branded_apps.html">Creating Branded Apps</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../enterprise/clients/custom_client_repos.html">Custom Client Repos</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../enterprise/clients/index.html">Index</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-toggle"></button>
    <span class="nav-text">External_storage</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../enterprise/external_storage/enterprise_only_auth.html">Enterprise Only Auth</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../enterprise/external_storage/index.html">Index</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../enterprise/external_storage/ldap_home_connector_configuration.html">LDAP Home Connector Configuration</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../enterprise/external_storage/onedrive.html">OneDrive</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../enterprise/external_storage/s3_swift_as_primary_object_store_configuration.html">S3 Swift As Primary Object Store Configuration</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../enterprise/external_storage/sharepoint-integration_configuration.html">Sharepoint integration Configuration</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../enterprise/external_storage/windows-network-drive_configuration.html">Windows network drive Configuration</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-toggle"></button>
    <span class="nav-text">File_management</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../enterprise/file_management/files_tagging.html">Files Tagging</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../enterprise/file_management/index.html">Index</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-toggle"></button>
    <span class="nav-text">Firewall</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../enterprise/firewall/file_firewall.html">File Firewall</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../enterprise/firewall/index.html">Index</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-toggle"></button>
    <span class="nav-text">Installation</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../enterprise/installation/index.html">Index</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../enterprise/installation/install.html">Install</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../enterprise/installation/oracle_db_configuration.html">Oracle DB Configuration</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-toggle"></button>
    <span class="nav-text">Logging</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../enterprise/logging/enterprise_logging_apps.html">Enterprise Logging Apps</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../enterprise/logging/index.html">Index</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-toggle"></button>
    <span class="nav-text">Ransomware-protection</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../enterprise/ransomware-protection/index.html">Index</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-toggle"></button>
    <span class="nav-text">Server_branding</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../enterprise/server_branding/enterprise_server_branding.html">Enterprise Server Branding</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../enterprise/server_branding/index.html">Index</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-toggle"></button>
    <span class="nav-text">User_management</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../enterprise/user_management/index.html">Index</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../enterprise/user_management/user_auth_shibboleth.html">User Auth Shibboleth</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../enterprise/index.html">Index</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <span class="nav-text">Faq</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../faq/index.html">Index</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <span class="nav-text">Installation</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <button class="nav-toggle"></button>
    <span class="nav-text">Docker</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="docker/index.html">Index</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-toggle"></button>
    <span class="nav-text">Letsencrypt</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="letsencrypt/apache.html">Apache</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="letsencrypt/index.html">Index</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="letsencrypt/nginx.html">NGINX</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="apps_management_installation.html">Apps Management Installation</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="apps_supported.html">Apps Supported</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="changing_the_web_route.html">Changing the Web Route</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="command_line_installation.html">Command Line Installation</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="configuration_notes_and_tips.html">Configuration Notes and Tips</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="deployment_considerations.html">Deployment Considerations</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="deployment_recommendations.html">Deployment Recommendations</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="index.html">Index</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="installation_wizard.html">Installation Wizard</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="linux_installation.html">Linux Installation</a>
  </li>
  <li class="nav-item is-current-page" data-depth="3">
    <a class="nav-link" href="nginx_configuration.html">NGINX Configuration</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="selinux_configuration.html">SELinux Configuration</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="source_installation.html">Source Installation</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="system_requirements.html">System ReqUIrements</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="troubleshooting.html">Troubleshooting</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <span class="nav-text">Issues</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../issues/code_signing.html">Code Signing</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../issues/general_troubleshooting.html">General Troubleshooting</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../issues/impersonate_users.html">Impersonate Users</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../issues/index.html">Index</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <span class="nav-text">Maintenance</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../maintenance/backup.html">Backup</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../maintenance/enable_maintenance.html">Enable Maintenance</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../maintenance/index.html">Index</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../maintenance/manual_upgrade.html">Manual Upgrade</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../maintenance/manually-moving-data-folders.html">Manually moving data folders</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../maintenance/migrating.html">Migrating</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../maintenance/package_upgrade.html">Package Upgrade</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../maintenance/restore.html">Restore</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../maintenance/update.html">Update</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../maintenance/upgrade.html">Upgrade</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <span class="nav-text">Upgrading</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../upgrading/index.html">Index</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../upgrading/marketplace_apps.html">Marketplace Apps</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../upgrading/upgrade_php.html">Upgrade PHP</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../contents.html">Contents</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../index.html">Index</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../release_notes.html">Release Notes</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../whats_new_admin.html">Whats New Admin</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-toggle"></button>
    <span class="nav-text">user manual</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <span class="nav-text">External_storage</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../user_manual/external_storage/external_storage.html">External Storage</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../user_manual/external_storage/index.html">Index</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../user_manual/external_storage/sharepoint_connecting.html">Sharepoint Connecting</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <span class="nav-text">Files</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <button class="nav-toggle"></button>
    <span class="nav-text">Webgui</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../user_manual/files/webgui/comments.html">Comments</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../user_manual/files/webgui/custom_groups.html">Custom Groups</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../user_manual/files/webgui/index.html">Index</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../user_manual/files/webgui/navigating.html">Navigating</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../user_manual/files/webgui/overview.html">Overview</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../user_manual/files/webgui/quota.html">Quota</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../user_manual/files/webgui/sharing.html">Sharing</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../user_manual/files/webgui/tagging.html">Tagging</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../user_manual/files/access_webdav.html">Access Webdav</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../user_manual/files/deleted_file_management.html">Deleted File Management</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../user_manual/files/desktop_mobile_sync.html">Desktop Mobile Sync</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../user_manual/files/encrypting_files.html">Encrypting Files</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../user_manual/files/federated_cloud_sharing.html">Federated Cloud Sharing</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../user_manual/files/gallery_app.html">Gallery App</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../user_manual/files/index.html">Index</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../user_manual/files/large_file_upload.html">Large File Upload</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../user_manual/files/public_link_shares.html">Public Link Shares</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../user_manual/files/troubleshooting.html">Troubleshooting</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../user_manual/files/version_control.html">Version Control</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <span class="nav-text">Pim</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../user_manual/pim/calendar.html">Calendar</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../user_manual/pim/contacts.html">Contacts</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../user_manual/pim/index.html">Index</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../user_manual/pim/sync_ios.html">Sync Ios</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../user_manual/pim/sync_kde.html">Sync Kde</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../user_manual/pim/sync_osx.html">Sync Osx</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../user_manual/pim/sync_thunderbird.html">Sync Thunderbird</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../user_manual/pim/troubleshooting.html">Troubleshooting</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../user_manual/contents.html">Contents</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../user_manual/index.html">Index</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../user_manual/session_management.html">Session Management</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../user_manual/troubleshooting.html">Troubleshooting</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../user_manual/userpreferences.html">Userpreferences</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../user_manual/webinterface.html">Webinterface</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../user_manual/whats_new.html">Whats New</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-toggle"></button>
    <span class="nav-text">developer manual</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <span class="nav-text">App</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <button class="nav-toggle"></button>
    <span class="nav-text">Advanced</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../developer_manual/app/advanced/code_signing.html">Code Signing</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../developer_manual/app/advanced/custom-cache-backend.html">Custom cache backend</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../developer_manual/app/advanced/custom-storage-backend.html">Custom storage backend</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../developer_manual/app/advanced/extstorage.html">Extstorage</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../developer_manual/app/advanced/index.html">Index</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../developer_manual/app/advanced/l10n.html">L10N</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../developer_manual/app/advanced/storage-backend.html">Storage backend</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../developer_manual/app/advanced/two-factor-provider.html">Two factor provider</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../developer_manual/app/advanced/users.html">Users</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-toggle"></button>
    <span class="nav-text">Fundamentals</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../developer_manual/app/fundamentals/api.html">API</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../developer_manual/app/fundamentals/backgroundjobs.html">Backgroundjobs</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../developer_manual/app/fundamentals/changelog.html">Changelog</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../developer_manual/app/fundamentals/classloader.html">ClaSSLoader</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../developer_manual/app/fundamentals/configuration.html">Configuration</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../developer_manual/app/fundamentals/container.html">Container</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../developer_manual/app/fundamentals/controllers.html">Controllers</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../developer_manual/app/fundamentals/css.html">CSS</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../developer_manual/app/fundamentals/database.html">Database</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../developer_manual/app/fundamentals/filesystem.html">Filesystem</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../developer_manual/app/fundamentals/hooks.html">Hooks</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../developer_manual/app/fundamentals/index.html">Index</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../developer_manual/app/fundamentals/info.html">Info</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../developer_manual/app/fundamentals/js.html">JS</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../developer_manual/app/fundamentals/logging.html">Logging</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../developer_manual/app/fundamentals/market_app.html">Market App</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../developer_manual/app/fundamentals/middleware.html">Middleware</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../developer_manual/app/fundamentals/publishing.html">Publishing</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../developer_manual/app/fundamentals/routes.html">Routes</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../developer_manual/app/fundamentals/templates.html">Templates</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../developer_manual/app/fundamentals/testing.html">Testing</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-toggle"></button>
    <span class="nav-text">Tutorial</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../developer_manual/app/tutorial/database_connectivity.html">Database Connectivity</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../developer_manual/app/tutorial/development_environment.html">Development Environment</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../developer_manual/app/tutorial/finishing_touches.html">Finishing Touches</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../developer_manual/app/tutorial/index.html">Index</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../developer_manual/app/tutorial/javascript_and_css.html">JavaScript and CSS</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../developer_manual/app/tutorial/navigation.html">Navigation</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../developer_manual/app/tutorial/request.html">Request</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../developer_manual/app/tutorial/requirements.html">ReqUIrements</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../developer_manual/app/tutorial/restful_api.html">Restful API</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../developer_manual/app/tutorial/routes_and_controllers.html">Routes and Controllers</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../developer_manual/app/tutorial/template_content.html">Template Content</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../developer_manual/app/tutorial/testing.html">Testing</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../developer_manual/app/tutorial/wiring_it_up.html">Wiring it Up</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../developer_manual/app/index.html">Index</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../developer_manual/app/introduction.html">Introduction</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <span class="nav-text">Bugtracker</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../developer_manual/bugtracker/codereviews.html">Codereviews</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../developer_manual/bugtracker/index.html">Index</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../developer_manual/bugtracker/triaging.html">Triaging</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <span class="nav-text">Commun</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../developer_manual/commun/help_and_communication.html">Help and Communication</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../developer_manual/commun/index.html">Index</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <span class="nav-text">Core</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../developer_manual/core/acceptance-tests.html">Acceptance tests</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../developer_manual/core/configfile.html">Configfile</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../developer_manual/core/externalapi.html">ExternalAPI</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../developer_manual/core/index.html">Index</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../developer_manual/core/introduction.html">Introduction</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../developer_manual/core/ocs-capabilities.html">OCS capabilities</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../developer_manual/core/ocs-recipient-api.html">OCS recipient API</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../developer_manual/core/ocs-share-api.html">OCS share API</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../developer_manual/core/theming.html">Theming</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../developer_manual/core/translation.html">Translation</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../developer_manual/core/ui-testing.html">UI testing</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../developer_manual/core/unit-testing.html">Unit testing</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <span class="nav-text">General</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../developer_manual/general/backporting.html">Backporting</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../developer_manual/general/code-of-conduct.html">Code of conduct</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../developer_manual/general/codingguidelines.html">CodingGUIdelines</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../developer_manual/general/debugging.html">Debugging</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../developer_manual/general/devenv.html">Devenv</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../developer_manual/general/index.html">Index</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../developer_manual/general/performance.html">Performance</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../developer_manual/general/security.html">Security</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <span class="nav-text">Mobile_development</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <button class="nav-toggle"></button>
    <span class="nav-text">Android_library</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../developer_manual/mobile_development/android_library/examples.html">Examples</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../developer_manual/mobile_development/android_library/index.html">Index</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../developer_manual/mobile_development/android_library/library_installation.html">Library Installation</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-toggle"></button>
    <span class="nav-text">Ios_library</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../developer_manual/mobile_development/ios_library/examples.html">Examples</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../developer_manual/mobile_development/ios_library/index.html">Index</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../developer_manual/mobile_development/ios_library/library_installation.html">Library Installation</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../developer_manual/mobile_development/index.html">Index</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <span class="nav-text">Testing</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../developer_manual/testing/index.html">Index</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <span class="nav-text">Webdav_api</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../developer_manual/webdav_api/comments.html">Comments</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../developer_manual/webdav_api/files_versions.html">Files Versions</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../developer_manual/webdav_api/index.html">Index</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../developer_manual/webdav_api/tags.html">Tags</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../developer_manual/index.html">Index</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="navigation-explore" data-panel="explore">
  <div class="context">
    <span class="title">ownCloud // Documentation</span>
    <span class="version">master</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <span class="title">ownCloud // Documentation</span>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../index.html">master</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
  <main class="main" role="main">
<div class="toolbar" role="navigation">
  <button class="navigation-toggle"></button>
<nav class="crumbs" role="navigation" aria-label="breadcrumbs">
  <ul>
    <li class="crumb"><a href="../index.html">ownCloud // Documentation</a></li>
    <li class="crumb">ROOT</li>
    <li class="crumb">Installation</li>
    <li class="crumb"><a href="nginx_configuration.html">NGINX Configuration</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="file:///Users/settermjd/Workspace/clients/ownCloud/antora-build/admin_manual/modules/ROOT/pages/installation/nginx_configuration.adoc">Edit this Page</a></div>
</div>
<article class="doc">
<h1>NGINX Configuration</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>This page covers example NGINX configurations to use with running an
ownCloud server. Note that NGINX is <em>not officially supported</em>, and this
page is <em>community-maintained</em>. Thank you, contributors!</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Depending on your setup, you need to insert the code examples into
your NGINX configuration file.</p>
</li>
<li>
<p>Adjust <strong>server_name</strong>, <strong>root</strong>, <strong>ssl_certificate</strong>, <strong>ssl_certificate_key</strong>
ect. to suit your needs.</p>
</li>
<li>
<p>Make sure your SSL certificates are readable by the server (see
<a href="http://wiki.nginx.org/HttpSslModule">NGINX HTTP SSL Module
documentation</a>).</p>
</li>
<li>
<p><code>add_header</code> statements are only valid in the current <code>location</code> block
and are not derived or cascaded from or to a different <code>location</code> block.
All necessary <code>add_header</code> statements <strong>must</strong> be defined in each
<code>location</code> block needed.</p>
</li>
<li>
<p>For better readability it is possible to move <em>common</em> <code>add_header</code>
directives into a separate file and include that file wherever
necessary. However, each <code>add_header</code> directive must be written in a
single line to prevent connection problems with sync clients.</p>
</li>
<li>
<p>The same is true for <code>map</code> directives which also can be collected into
a singe file and then be included.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="example-configurations"><a class="anchor" href="#example-configurations"></a>Example Configurations</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Be careful about line breaks if you copy the examples, as long lines may
be broken for page formatting.</p>
</div>
<div class="paragraph">
<p>You can use ownCloud over plain HTTP. However, <em>we strongly encourage
you</em> to use SSL/TLS to encrypt all of your server traffic <strong>and</strong> to
protect users’ logins, and their data while it is in transit. To use
plain HTTP:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Remove the server block containing the redirect</p>
</li>
<li>
<p>Change <strong>listen 443 ssl http2</strong> to <strong>listen 80;</strong></p>
</li>
<li>
<p>Remove all <strong><a href="">ssl</a></strong> entries.</p>
</li>
<li>
<p>Remove <strong>fastcgi_params HTTPS on;</strong></p>
</li>
</ol>
</div>
<div class="sect2">
<h3 id="note-1"><a class="anchor" href="#note-1"></a>Note 1</h3>
<div class="literalblock">
<div class="content">
<pre>fastcgi_buffers 8 4K;</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Do not set the number of buffers to greater than 63. In our example,
it is set to 8.</p>
</li>
<li>
<p>If you exceed this maximum, big file downloads may consume a lot of
system memory over time. This is especially problematic on low-memory
systems.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="note-2"><a class="anchor" href="#note-2"></a>Note 2</h3>
<div class="literalblock">
<div class="content">
<pre>fastcgi_ignore_headers
X-Accel-Buffering</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>From ownCloud version 10.0.4 on, a header will be sent to NGINX not to
use buffers to avoid problems with problematic <code>fastcgi_buffers</code> values.
See note above.</p>
</li>
<li>
<p>If the values of <code>fastcgi_buffers</code> are properly set and no problems
are expected, you can use this directive to reenable buffering
<strong>overriding</strong> the sent header.</p>
</li>
<li>
<p>In case you use an earlier version of ownCloud or can´t change the
buffers, or can´t remove a existing ignore header directive, you can
explicitly enable following directive in the location block
<code>fastcgi_buffering off;</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The directives <code>fastcgi_ignore_headers X-Accel-Buffering;</code> and
<code>fastcgi_buffering off;</code> can be used separately but not together.</p>
</div>
</div>
<div class="sect2">
<h3 id="owncloud-in-the-web-root-of-nginx"><a class="anchor" href="#owncloud-in-the-web-root-of-nginx"></a>ownCloud in the web root of NGINX</h3>
<div class="paragraph">
<p>The following config should be used when ownCloud is placed in the web
root of your NGINX installation.</p>
</div>
<div class="paragraph">
<p>The configuration assumes that ownCloud is installed in</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p><code>/var/www/owncloud</code> and is accessed via <code>http(s)://cloud.example.com</code>.</p>
</div>
</blockquote>
</div>
</div>
<div class="sect2">
<h3 id="owncloud-in-a-subdirectory-of-nginx"><a class="anchor" href="#owncloud-in-a-subdirectory-of-nginx"></a>ownCloud in a subdirectory of NGINX</h3>
<div class="paragraph">
<p>The following config should be used when ownCloud is placed under a
different context root of your NGINX installation such as /owncloud or
/cloud.</p>
</div>
<div class="paragraph">
<p>The configuration assumes that ownCloud is installed in</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p><code>/var/www/owncloud</code> is accessed via <code>http(s)://example.com/owncloud</code></p>
</div>
<div class="paragraph">
<p>and that you have <code>'overwriteweb root' =&gt; '/owncloud',</code> set in your
<code>config/config.php</code>.</p>
</div>
</blockquote>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="troubleshooting"><a class="anchor" href="#troubleshooting"></a>Troubleshooting</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="javascript-.js-or-css-.css-files-not-served-properly"><a class="anchor" href="#javascript-.js-or-css-.css-files-not-served-properly"></a>JavaScript (.js) or CSS (.css) files not served properly</h3>
<div class="paragraph">
<p>A standard issue with custom NGINX configurations is, that JavaScript
(.js) or CSS (.css) files are not served properly, leading to a 404
(File Not Found) error on those files and a broken web interface.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>This could be caused by an inproper sequence of <code>location</code> blocks.</p>
<div class="paragraph">
<p>The following sequence is correct:</p>
</div>
</li>
</ul>
</div>
<div class="literalblock">
<div class="content">
<pre>location ~ \.php(?:$|/) {
 ...
}

location ~ \.(?:css|js)$ {
 ...
}</pre>
</div>
</div>
<div class="paragraph">
<p>Other custom configurations like caching JavaScript (.js) or CSS (.css)
files via gzip could also cause such issues.</p>
</div>
</div>
<div class="sect2">
<h3 id="not-all-of-my-contacts-are-synchronized"><a class="anchor" href="#not-all-of-my-contacts-are-synchronized"></a>Not all of my contacts are synchronized</h3>
<div class="paragraph">
<p>Check for server timeouts! It turns out that CardDAV sync often fails
silently if the request runs into timeouts. With PHP-FPM you might see a
&#8220;CoreDAVHTTPStatusErrorDomain error 504&#8221; which is an &#8220;HTTP 504
Gateway timeout&#8221; error. To solve this, first check the
<code>default_socket_timeout</code> setting in <code>/etc/php/7.0/fpm/php.ini</code> and
increase the above <code>fastcgi_read_timeout</code> accordingly. Depending on your
server’s performance a timeout of 180s should be sufficient to sync an
address book of ~1000 contacts.</p>
</div>
<div id="windows-error-0x80070043-the-network-name-cannot-be-found.-while-adding-a-network-drive" class="paragraph">
<p>Windows: Error 0x80070043 &#8220;The network name cannot be found.&#8221; while
adding a network drive
<sub>~</sub><sub>~</sub><sub>~</sub><sub>~</sub><sub>~</sub><sub>~</sub><sub>~</sub><sub>~</sub><sub>~</sub><sub>~</sub><sub>~</sub><sub>~</sub><sub>~</sub><sub>~</sub><sub>~</sub><sub>~</sub><sub>~</sub><sub>~</sub><sub>~</sub><sub>~</sub><sub>~</sub><sub>~</sub><sub>~</sub><sub>~</sub><sub>~</sub><sub>~</sub><sub>~</sub><sub>~</sub><sub>~</sub><sub>~</sub>~~</p>
</div>
<div class="paragraph">
<p>The windows native WebDAV client might fail with the following error
message:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>Error 0x80070043 "The network name cannot be found." while adding a network drive</pre>
</div>
</div>
<div class="paragraph">
<p>A known workaround for this issue is to update your web server
configuration.</p>
</div>
<div class="verseblock">
<pre class="content">Because NGINX does not allow nested <a href="http://nginx.org/en/docs/http/ngx_http_rewrite_module.html">if</a> directives, you need to use the <a href="http://nginx.org/en/docs/http/ngx_http_map_module.html">map</a> directive.
The position of the <a href="http://nginx.org/en/docs/http/ngx_http_core_module.html#location">location</a> directive is important for success.</pre>
</div>
<div class="paragraph">
<p><strong>1 Create a map directive outside your server block</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sourceCode hljs" data-lang="sourceCode"># Fixes Windows WebDav client error 0x80070043 "The network name cannot be found."
map "$http_user_agent:$request_method" $WinWebDav {
    default         0;
    "DavClnt:OPTIONS"   1;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>2 Inside your server block on top of your location directives</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sourceCode hljs" data-lang="sourceCode">location = / {
    if ($WinWebDav) { return 401; }
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="log-optimisation"><a class="anchor" href="#log-optimisation"></a>Log Optimisation</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="suppressing-htaccesstest.txt-and-.ocdata-log-messages"><a class="anchor" href="#suppressing-htaccesstest.txt-and-.ocdata-log-messages"></a>Suppressing <code>htaccesstest.txt</code> and <code>.ocdata</code> Log Messages</h3>
<div class="paragraph">
<p>If you are seeing meaningless messages in your logfile, for example
<a href="https://central.owncloud.org/t/htaccesstest-txt-errors-in-logfiles/831">client
denied by server configuration: /var/www/data/htaccesstest.txt</a>, or
access to <code>.ocdata</code>, add this section to your NGINX configuration to
suppress them:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sourceCode hljs" data-lang="sourceCode">location = /data/htaccesstest.txt {
    allow all;
    log_not_found off;
    access_log off;
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sourceCode hljs" data-lang="sourceCode">location = /data/\.ocdata {
    access_log off;
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="prevent-access-log-entries-when-accessing-thumbnails"><a class="anchor" href="#prevent-access-log-entries-when-accessing-thumbnails"></a>Prevent access log entries when accessing thumbnails</h3>
<div class="paragraph">
<p>When using eg. the Gallery App, any access to a thumbnail of a picture
will be logged. This can cause a massive log quanity making log reading
challenging. With this approach, you can prevent access logging for
those thumbnails.</p>
</div>
<div class="paragraph">
<p><strong>1 Create a map directive outside your server block like</strong></p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>(Adopt the path queried according your needs.)</p>
</div>
</blockquote>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sourceCode hljs" data-lang="sourceCode"># do not access log to gallery thumbnails, flooding access logs only, error will be logged anyway
map $request_uri $loggable {
    default                              1;
    ~*\/apps\/gallery\/thumbnails        0;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>2 Inside your server block where you define your logs</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sourceCode hljs" data-lang="sourceCode">access_log /path-to-your-log-file combined if=$loggable;</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you want or need to log thumbnails access, you can easily add another
logfile which only logs this access. You can easily enable / disable
this kind of logging if you uncomment / comment the line starting with
<code>0</code> in the following <code>map</code> directive.</p>
</div>
<div class="paragraph">
<p><strong>Below the above map statement</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sourceCode hljs" data-lang="sourceCode"># invert the $loggable variable
map $loggable $invertloggable {
    default                         0;
    0                               1;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Below the above access_log statement</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sourceCode hljs" data-lang="sourceCode">access_log /var/log/nginx/&lt;your-log-file-inverted&gt; combined if=$invertloggable;</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="performance-tuning"><a class="anchor" href="#performance-tuning"></a>Performance Tuning</h2>
<div class="sectionbody">
<div class="paragraph">
<p><strong>1 HTTP/2</strong></p>
</div>
<div class="paragraph">
<p>To increase the performance of your NGINX installation, we recommend
using either the SPDY or HTTP_V2 modules, depending on your installed
NGINX version.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>nginx (&lt;1.9.5)
<a href="http://nginx.org/en/docs/http/ngx_http_spdy_module.html">ngx_http_spdy_module</a></p>
</li>
<li>
<p>nginx (+1.9.5)
<a href="http://nginx.org/en/docs/http/ngx_http_v2_module.html">ngx_http_v2_module</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>To use HTTP_V2 for NGINX you have to check two things:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Be aware that this module may not built in by default, due to a
dependency to the OpenSSL version used on your system. It will be
enabled with the <code>--with-http_v2_module</code> configuration parameter during
compilation. The dependencies should be checked automatically. You can
check the presence of <code>ngx_http_v2_module</code> by using the command:
<code>nginx -V 2&gt;&amp;1 | grep http_v2 -o</code>. A description of how to compile NGINX
to include modules can be found in
<a href="https://www.nginx.com/resources/wiki/extending/compiling">Compiling
Modules</a>.</p>
</li>
<li>
<p>When changing from
<a href="https://www.maxcdn.com/one/visual-glossary/spdy/">SPDY</a> to
<a href="https://tools.ietf.org/html/rfc7540">HTTP v2</a>, the NGINX config has to be
changed from <code>listen 443 ssl spdy;</code> to <code>listen 443 ssl http2;</code></p>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>2 Caching Metadata</strong></p>
</div>
<div class="paragraph">
<p>The <code>open_file_cache</code> directive can help you to cache file metadata
information. This can increase performance on high loads respectively
when using eg NFS as backend. That cache can store:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Open file descriptors, their sizes and modification times;</p>
</li>
<li>
<p>Information on existence of directories;</p>
</li>
<li>
<p>File lookup errors, such as &#8220;file not found&#8221;, &#8220;no read
permission&#8221;, and so on.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>To configure metadata caching, add following directives either in your
http, server or location block:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sourceCode hljs" data-lang="sourceCode">open_file_cache                 max=10000 inactive=5m;
open_file_cache_valid           1m;
open_file_cache_min_uses        1;
open_file_cache_errors          on;</code></pre>
</div>
</div>
<div id="configure-nginx-to-use-caching-for-owncloud-internal-images-and-thumbnails" class="paragraph">
<p>Configure NGINX to use caching for ownCloud internal images and
thumbnails
<sub>~</sub><sub>~</sub><sub>~</sub><sub>~</sub><sub>~</sub><sub>~</sub><sub>~</sub><sub>~</sub><sub>~</sub><sub>~</sub><sub>~</sub><sub>~</sub><sub>~</sub><sub>~</sub><sub>~</sub><sub>~</sub><sub>~</sub><sub>~</sub><sub>~</sub><sub>~</sub><sub>~</sub><sub>~</sub><sub>~</sub><sub>~</sub>~~</p>
</div>
<div class="paragraph">
<p>This mechanism speeds up presentation as it shifts requests to NGINX and
minimizes PHP invocations, which otherwise would take place for every
thumbnail or internal image presented every time.</p>
</div>
<div class="paragraph">
<p><strong>1 Preparation</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Create a directory where NGINX will save the cached thumbnails or
internal images. Use any path that fits to your environment. Replace
<code>/opt/cachezone</code> in this example with your path created:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sourceCode hljs" data-lang="sourceCode">sudo mkdir -p /opt/cachezone
sudo chown www-data:www-data /opt/cachezone</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>2 Configuration</strong></p>
</div>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p><strong>Define when to skip the cache:</strong></p>
<div class="ulist">
<ul>
<li>
<p><strong>Option 1:</strong> <code>map</code></p>
<div class="paragraph">
<p>This is the preferred method. In the <code>http{}</code> block, but <em>outside</em> the
<code>server{}</code> block:</p>
</div>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sourceCode hljs" data-lang="sourceCode"># skip_cache, default skip
map $request_uri $skip_cache {
     default              1;
     ~*\/thumbnail.php    0;
     ~*\/apps\/gallery\/  0;
     ~*\/core\/img\/      0;
}</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Option 2:</strong> <code>if</code></p>
<div class="paragraph">
<p>In the <code>server{}</code> block, above the location block mentioned below:</p>
</div>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sourceCode hljs" data-lang="sourceCode">set $skip_cache 1;
if ($request_uri ~* "thumbnail.php")      { set $skip_cache 0; }
if ($request_uri ~* "/apps/gallery/")     { set $skip_cache 0; }
if ($request_uri ~* "/core/img/")         { set $skip_cache 0; }</code></pre>
</div>
</div>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p><strong>General Config:</strong></p>
</li>
</ol>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>In case you want to have multiple cache paths with different cache keys,
follow the NGINX documentation where to place the directives. For the
sake of simplicity, we both add them to the <code>http{}</code> block.</p>
</div>
</blockquote>
</div>
<div class="ulist">
<ul>
<li>
<p>Add <em>inside</em> the <code>http{}</code> block:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sourceCode hljs" data-lang="sourceCode">fastcgi_cache_path /opt/cache levels=1:2 keys_zone=cachezone:100m
                   max_size=500m inactive=60m use_temp_path=off;
fastcgi_cache_key $http_cookie$request_method$host$request_uri;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Add <em>inside</em> the <code>server{}</code> block the following FastCGI caching
directives, as an example of a configuration:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sourceCode hljs" data-lang="sourceCode">location ~ \.php(?:$/) {
    fastcgi_split_path_info ^(.+\.php)(/.+)$;

    include fastcgi_params;
    # ...

    ## Begin - FastCGI caching
    fastcgi_ignore_headers  "Cache-Control"
                            "Expires"
                            "Set-Cookie";
    fastcgi_cache_use_stale error
                            timeout
                            updating
                            http_429
                            http_500
                            http_503;
    fastcgi_cache_background_update on;
    fastcgi_no_cache $skip_cache;
    fastcgi_cache_bypass $skip_cache;
    fastcgi_cache cachezone;
    fastcgi_cache_valid  60m;
    fastcgi_cache_methods GET HEAD;
    ## End - FastCGI caching

}</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>3 Test the configuration</strong></p>
</div>
<div class="literalblock">
<div class="content">
<pre>sudo nginx -t
sudo service nginx reload</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Open your browser and clear your cache.</p>
</li>
<li>
<p>Logon to your ownCloud instance, open the gallery app, move thru your
folders and watch while the thumbnails are generated for the first time.</p>
</li>
<li>
<p>You may also watch with eg. <code>htop</code> your system load while the
thumbnails are processed.</p>
</li>
<li>
<p>Go to another app or logout and relogon.</p>
</li>
<li>
<p>Open the gallery app again and browse to the folders you accessed
before. Your thumbnails should appear more or less immediately.</p>
</li>
<li>
<p><code>htop</code> will not show up additional load while processing, compared to
the high load before.</p>
</li>
</ul>
</div>
</div>
</div>
</article>
  </main>
</div>
<footer class="footer">
  <p>This page was built using the Antora default UI.</p>
  <p>The source code for this UI is licensed under the terms of the MPL-2.0 license.</p>
</footer>
<script src="../../owncloud-docs/js/site.js"></script>
<script src="../../owncloud-docs/js/vendor/highlight.js"></script>
<script>hljs.initHighlighting()</script>
  </body>
</html>
